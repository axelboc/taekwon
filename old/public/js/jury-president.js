!function e(t,n,r){function o(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return o(n?n:e)},l,l.exports,e,t,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,t,n){"use strict";function r(e){this.io=e,this.root=document.getElementById("config-panel"),o.subscribeToEvents(e,"configPanel",["updateConfig"],this),this.newMatchBtn=this.root.querySelector(".match-btn--new"),this.configInner=this.root.querySelector(".cf-inner"),this.newMatchBtn.addEventListener("click",this.io.sendFunc("createMatch")),this.configInner.addEventListener("click",this.onConfigInnerDelegate.bind(this))}var o=e("../shared/helpers"),i=e("../../templates/precompiled/config-items.njk");r.prototype.updateConfig=function(e){this.configInner.innerHTML=i.render(e)},r.prototype.onConfigInnerDelegate=function(e){var t=e.target;if(t&&"BUTTON"===t.nodeName){var n,r=t.parentElement.parentElement;switch(r.dataset.type){case"time":n=t.classList.contains("cf-dec")?-1:1;break;case"boolean":n=!t.classList.contains("cf-false")}this.io.send("setConfigItem",{name:r.dataset.name,value:n})}},t.exports.ConfigPanel=r},{"../../templates/precompiled/config-items.njk":18,"../shared/helpers":9}],2:[function(e,t,n){"use strict";function r(e){this.io=e,this.root=document.getElementById("judges-sidebar"),o.subscribeToEvents(e,"judgesSidebar",["setHeading","updateSlotList"],this),this.heading=this.root.querySelector(".js-heading"),this.list=this.root.querySelector(".js-list"),this.addSlotBtn=this.root.querySelector(".js-add"),this.removeSlotBtn=this.root.querySelector(".js-remove"),this.list.addEventListener("click",this.onListDelegate.bind(this)),this.addSlotBtn.addEventListener("click",this.onAddSlotBtn.bind(this)),this.removeSlotBtn.addEventListener("click",this.onRemoveSlotBtn.bind(this))}var o=e("../shared/helpers"),i=e("../../templates/precompiled/judge-slots.njk");r.prototype.setHeading=function(e){this.heading.textContent=e.text},r.prototype.updateSlotList=function(e){this.list.innerHTML=i.render(e)},r.prototype.onListDelegate=function(e){var t=e.target;if(t&&"BUTTON"===t.nodeName){var n={id:t.dataset.id};t.classList.contains("js-judge-remove")?this.io.send("removeCJ",n):t.classList.contains("js-judge-accept")?this.io.send("authoriseCJ",n):t.classList.contains("js-judge-reject")&&this.io.send("rejectCJ",n)}},r.prototype.onAddSlotBtn=function(){this.addSlotBtn.blur(),this.io.send("addSlot")},r.prototype.onRemoveSlotBtn=function(){this.removeSlotBtn.blur(),this.io.send("removeSlot")},t.exports.JudgesSidebar=r},{"../../templates/precompiled/judge-slots.njk":19,"../shared/helpers":9}],3:[function(e,t,n){"use strict";function r(e){this.io=e,this.root=document.getElementById("match-panel"),i.subscribeToEvents(e,"matchPanel",["setRoundLabel","toggleInjuryTimer","updateState","updateScoreboards","updatePenalties","disablePenaltyBtns"],this);var t=new o({urls:["/audio/beeps.ogg","/audio/beeps.mp3"]});this.timeKeeping=this.root.querySelector(".time-keeping"),this.roundTimer=new s("round",e,t),this.injuryTimer=new s("injury",e,t),this.rvTop=this.root.querySelector(".rv-top"),this.stateInner=this.root.querySelector(".st-inner"),this.scoreboardsInner=this.root.querySelector(".sc-inner"),this.penalties=this.root.querySelector(".penalties"),this.foulsInner=this.root.querySelector(".pe-inner--fouls"),this.stateInner.addEventListener("click",this.onStateInnerDelegate.bind(this)),this.penalties.addEventListener("click",this.onPenaltiesDelegate.bind(this))}var o=e("howler").Howl,i=e("../shared/helpers"),s=e("./timer").Timer,a=e("../../templates/precompiled/state-btns.njk"),u=e("../../templates/precompiled/scoreboards.njk"),c=e("../../templates/precompiled/penalties.njk");r.prototype.setRoundLabel=function(e){this.rvTop.textContent=e.label},r.prototype.toggleInjuryTimer=function(e){this.timeKeeping.classList.toggle("tk_injury",e.show)},r.prototype.updateState=function(e){this.stateInner.innerHTML=a.render(e.state)},r.prototype.updateScoreboards=function(e){this.scoreboardsInner.innerHTML=u.render(e)},r.prototype.updatePenalties=function(e){this.penalties.innerHTML=c.render(e)},r.prototype.disablePenaltyBtns=function(){[].forEach.call(this.root.querySelectorAll(".pe-btn"),function(e){i.enableBtn(e,!1)})},r.prototype.onStateInnerDelegate=function(e){var t=e.target;t&&"BUTTON"===t.nodeName&&(t.blur(),t.classList.contains("match-btn--start")?this.io.send("startMatchState"):t.classList.contains("match-btn--end")?this.io.send("endMatchState"):t.classList.contains("match-btn--injury")&&this.io.send("toggleInjury"))},r.prototype.onPenaltiesDelegate=function(e){var t=e.target;if(t&&"BUTTON"===t.nodeName){t.blur();var n=t.classList.contains("pe-inc")?"incrementPenalty":t.classList.contains("pe-dec")?"decrementPenalty":null;n&&this.io.send(n,{type:t.dataset.type,competitor:t.dataset.competitor})}},t.exports.MatchPanel=r},{"../../templates/precompiled/penalties.njk":20,"../../templates/precompiled/scoreboards.njk":23,"../../templates/precompiled/state-btns.njk":24,"../shared/helpers":9,"./timer":7,howler:15}],4:[function(e,t,n){"use strict";function r(e){this.io=e,this.root=document.getElementById("result-panel"),o.subscribeToEvents(e,"resultPanel",["setWinner","showContinueBtns","showEndBtns","updateResults"],this),this.winner=this.root.querySelector(".rp-winner"),this.continueBtnsWrap=document.getElementById("rp-buttons--continue"),this.endMatchBtn=this.root.querySelector(".match-btn--endm"),this.continueMatchBtn=this.root.querySelector(".match-btn--continue"),this.endBtnsWrap=document.getElementById("rp-buttons--end"),this.matchConfigBtn=this.root.querySelector(".match-btn--config"),this.newMatchBtn=this.root.querySelector(".match-btn--new"),this.results=this.root.querySelector(".rp-results"),this.endMatchBtn.addEventListener("click",this.io.sendFunc("endMatch")),this.continueMatchBtn.addEventListener("click",this.io.sendFunc("continueMatch")),this.matchConfigBtn.addEventListener("click",this.io.sendFunc("configureMatch")),this.newMatchBtn.addEventListener("click",this.io.sendFunc("createMatch"))}var o=e("../shared/helpers"),i=e("../../templates/precompiled/results.njk");r.prototype.setWinner=function(e){e.winner?(this.winner.className="rp-winner "+e.winner+"-col",this.winner.textContent=e.winner.charAt(0).toUpperCase()+e.winner.slice(1)+" wins"):(this.winner.className="rp-winner rp-winner--draw",this.winner.textContent="Draw")},r.prototype.showContinueBtns=function(){this.continueBtnsWrap.classList.remove("hidden"),this.endBtnsWrap.classList.add("hidden")},r.prototype.showEndBtns=function(){this.continueBtnsWrap.classList.add("hidden"),this.endBtnsWrap.classList.remove("hidden")},r.prototype.updateResults=function(e){this.results.innerHTML=i.render(e)},t.exports.ResultPanel=r},{"../../templates/precompiled/results.njk":21,"../shared/helpers":9}],5:[function(e,t,n){"use strict";function r(e){this.io=e,this.root=document.getElementById("ring"),this.currentPanel=null,this.configPanel=new s(e),this.matchPanel=new a(e),this.resultPanel=new u(e),this.judgesSidebar=new i(e),o.subscribeToEvents(e,"ringView",["showPanel"],this)}var o=e("../shared/helpers"),i=e("./judges-sidebar").JudgesSidebar,s=e("./config-panel").ConfigPanel,a=e("./match-panel").MatchPanel,u=e("./result-panel").ResultPanel;r.prototype.showPanel=function(e){this.currentPanel&&this.currentPanel.root.classList.add("hidden"),this.currentPanel=this[e.panel],this.currentPanel.root.classList.remove("hidden")},t.exports.RingView=r},{"../shared/helpers":9,"./config-panel":1,"./judges-sidebar":2,"./match-panel":3,"./result-panel":4}],6:[function(e,t,n){"use strict";var r=e("nunjucks"),o=e("../shared/helpers"),i=e("../shared/io").IO;r.env=new r.Environment,r.env.addFilter("time",o.numToTime);var s=e("../shared/login-view").LoginView,a=e("../shared/ring-list-view").RingListView,u=e("./ring-view").RingView,c=new i("juryPresident"),l=null,p={loginView:new s(c),ringListView:new a(c),ringView:new u(c)};o.subscribeToEvents(c,"root",["showView"],{showView:function(e){l&&l.root.classList.add("hidden"),l=p[e.view],l.root.classList.remove("hidden")}})},{"../shared/helpers":9,"../shared/io":10,"../shared/login-view":11,"../shared/ring-list-view":12,"./ring-view":5,nunjucks:16}],7:[function(e,t,n){"use strict";function r(e,t,n){this.name=e,this.io=t,this.beeps=n,this.root=document.getElementById(e+"-timer"),this.min=this.root.querySelector(".tk-timer-min"),this.sec=this.root.querySelector(".tk-timer-sec"),this.intervalId=null,this.value=null,o.subscribeToEvents(t,e+"Timer",["reset","start","stop"],this),this.io.primus.on("error",this.stop.bind(this)),this.io.primus.on("offline",this.stop.bind(this)),this.io.primus.on("io.error",this.stop.bind(this))}var o=e("../shared/helpers"),i=e("../../config/config.json").timer;r.prototype.reset=function(e){this.value=e.value,this._valueChanged()},r.prototype.start=function(e){this.stop();var t=(e.countDown?this._tickDown:this._tickUp).bind(this);window.setTimeout(function(){t(),this.intervalId=window.setInterval(t,1e3)}.bind(this),e.delay?i.toggleDelay:0)},r.prototype.stop=function(){window.clearInterval(this.intervalId)},r.prototype._tickDown=function(){this.value>0&&(this.value-=1,this._valueChanged(),0===this.value&&(this.beeps.play(),this.stop()))},r.prototype._tickUp=function(){this.value+=1,this._valueChanged()},r.prototype._valueChanged=function(){var e=this.value%60;this.sec.textContent=(10>e?"0":"")+e,this.min.textContent=Math.floor(this.value/60),e%i.saveInterval===0&&this.io.send("saveTimerValue",{name:this.name,value:this.value})},t.exports.Timer=r},{"../../config/config.json":14,"../shared/helpers":9}],8:[function(e,t,n){"use strict";function r(){this.root=document.getElementById("backdrop"),this.text=this.root.querySelector(".bdp-text"),this.subtext=this.root.querySelector(".bdp-subtext")}r.prototype.update=function(e,t,n){this.text.textContent=e,this.subtext.textContent=t,this.root.classList.toggle("hidden",!n)},r.prototype.hide=function(){this.root.classList.add("hidden")},t.exports.Backdrop=r},{}],9:[function(e,t,n){"use strict";var r={subscribeToEvents:function(e,t,n,r){n.forEach(function(n){e.primus.on(t+"."+n,r[n].bind(r))})},shake:function(e){var t=function n(){e.classList.remove("shake"),e.removeEventListener("animationend",n)};e.addEventListener("animationend",t),e.classList.add("shake")},enableBtn:function(e,t){t?e.removeAttribute("disabled"):e.setAttribute("disabled","disabled")},numToTime:function(e){var t=e%60;return Math.floor(e/60)+":"+(10>t?"0":"")+t}};t.exports=r},{}],10:[function(e,t,n){"use strict";function r(e){return i.enabled()?(this.identity=e,this.backdrop=new a,this.id=i.get("id"),this.query="identity="+e+(this.id?"&id="+this.id:""),this.primus=new o("http://192.168.56.1",{reconnect:{max:5e3,retries:1e4,factor:1.2}}),this.primus.on("outgoing::url",function(e){e.query=this.query}.bind(this)),this.primus.on("error",this.wsError.bind(this)),this.primus.on("offline",this.wsOffline.bind(this)),void s.subscribeToEvents(this,"io",["saveId","setPageTitle","updateBackdrop","hideBackdrop","alert","error"],this)):void this.error({message:"Enable cookies and try again"})}var o=e("../vendor/primus"),i=e("tiny-cookie"),s=e("./helpers"),a=e("./backdrop").Backdrop;r.prototype.wsError=function(e){return console.warn("Web Socket error",e.code),1001!==e.code&&1006===e.code?void this.updateBackdrop({text:"Connection lost",subtext:"Attempting to reconnect...",visible:!0}):void 0},r.prototype.wsOffline=function(){console.warn("Offline!"),this.updateBackdrop({text:"Connection lost",subtext:"Check Wi-Fi settings or wait for signal to be restored",visible:!0})},r.prototype.saveId=function(e){this.id=e.id,this.query="identity="+this.identity+"&id="+this.id,i.set("id",e.id,{expires:"12h"})},r.prototype.setPageTitle=function(e){document.title=e.title},r.prototype.updateBackdrop=function(e){this.backdrop.update(e.text,e.subtext,e.visible)},r.prototype.hideBackdrop=function(){this.backdrop.hide()},r.prototype.alert=function(e){window.alert(e.reason)},r.prototype.error=function(e){var t=e.message||"Unexpected error";console.error("Error:",t),document.getElementById("backdrop").classList.add("hidden"),[].forEach.call(document.querySelectorAll(".view"),function(e){e.classList.add("hidden")});var n=document.getElementById("error");n.classList.remove("hidden"),n.querySelector(".err-instr").textContent=t,n.querySelector(".err-btn--retry").addEventListener("click",function(){window.location.reload()})},r.prototype.send=function(e,t){this.primus.emit(e,t)},r.prototype.sendFunc=function(e){return this.send.bind(this,e)},t.exports.IO=r},{"../vendor/primus":13,"./backdrop":8,"./helpers":9,"tiny-cookie":17}],11:[function(e,t,n){"use strict";function r(e){this.io=e,this.root=document.getElementById("login"),this.instr=this.root.querySelector(".login-instr"),this.field=this.root.querySelector(".login-field"),this.btn=this.root.querySelector(".login-btn"),this.btn.addEventListener("click",this.sendIdentification.bind(this)),this.root.querySelector(".login-form").addEventListener("submit",function(e){e.preventDefault()}),o.subscribeToEvents(e,"login",["setInstr","focusField","blurField","shakeResetField"],this)}var o=e("./helpers");r.prototype.sendIdentification=function(){this.io.send("identification",{identity:this.io.identity,value:this.field.value})},r.prototype.setInstr=function(e){this.instr.textContent=e.text},r.prototype.focusField=function(){setTimeout(function(){this.field.focus()}.bind(this),100)},r.prototype.blurField=function(){this.field.blur()},r.prototype.shakeResetField=function(){this.field.value="",this.field.focus(),o.shake(this.field)},t.exports.LoginView=r},{"./helpers":9}],12:[function(e,t,n){"use strict";function r(e){this.io=e,this.root=document.getElementById("ring-list"),this.instr=this.root.querySelector(".rl-instr"),this.defaultInstrTxt=this.instr.textContent,this.list=this.root.querySelector(".rl-list"),this.list.addEventListener("click",this.onListDelegate.bind(this)),o.subscribeToEvents(e,"ringListView",["setInstr","updateList"],this)}var o=e("./helpers"),i=e("../../templates/precompiled/ring-list.njk");r.prototype.setInstr=function(e){this.instr.textContent=e.text||this.defaultInstrTxt},r.prototype.updateList=function(e){this.list.innerHTML=i.render(e)},r.prototype.onListDelegate=function(e){var t=e.target;if(t&&"BUTTON"===t.nodeName){t.blur();var n=parseInt(t.dataset.index,10);this.io.send("selectRing",{index:n})}},t.exports.RingListView=r},{"../../templates/precompiled/ring-list.njk":22,"./helpers":9}],13:[function(e,t,n){(function(n){!function(e,n,r){n[e]=r.call(n),"undefined"!=typeof t&&t.exports?t.exports=n[e]:"function"==typeof define&&define.amd&&define(function(){return n[e]})}("Primus",this,function(){var t,r=function o(t,n,r){function i(a,u){if(!n[a]){if(!t[a]){var c="function"==typeof e&&e;if(!u&&c)return c(a,!0);if(s)return s(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var p=n[a]={exports:{}};t[a][0].call(p.exports,function(e){var n=t[a][1][e];return i(n?n:e)},p,p.exports,o,t,n,r)}return n[a].exports}for(var s="function"==typeof e&&e,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){"use strict";t.exports=function(e,t){function n(e,n){if(t[e]){if("string"==typeof t[e]&&(t[e]=t[e].split(r)),"function"==typeof t[e])return t[e].call(n);for(var o,i,s=0;s<t[e].length;s++)i=t[e][s],o=typeof i,"function"===o?i.call(n):"string"===o&&"function"==typeof n[i]&&n[i]()}}var r=/[, ]+/;return t=t||{},e=e||[],"string"==typeof e&&(e=e.split(r)),function(){var t,r=this,o=0;if(null===r[e[0]])return!1;for(n("before",r);o<e.length;o++)t=e[o],r[t]&&("function"==typeof r[t].destroy&&r[t].destroy(),r[t]=null);return r.emit&&r.emit("destroy"),n("after",r),!0}}},{}],2:[function(e,t,n){"use strict";t.exports=function(){for(var e,t=this,n=0,r=arguments.length,o=new Array(r);r>n;n++)o[n]=arguments[n];return"function"!=typeof o[o.length-1]?function(){for(var e=0,n=arguments.length,r=new Array(n);n>e;e++)r[e]=arguments[e];return t.emit.apply(t,o.concat(r))}:(e=o.pop(),function(){for(var n=0,r=arguments.length,i=new Array(r+1);r>n;n++)i[n+1]=arguments[n];return i[0]=function(e,n){return e?t.emit("error",e):(i=void 0===n?i.slice(1):null===n?[]:n,void t.emit.apply(t,o.concat(i)))},e.apply(t,i),!0})}},{}],3:[function(e,t,n){"use strict";function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(){}var i="function"!=typeof Object.create?"~":!1;o.prototype._events=void 0,o.prototype.listeners=function(e,t){var n=i?i+e:e,r=this._events&&this._events[n];if(t)return!!r;if(!r)return[];if(this._events[n].fn)return[this._events[n].fn];for(var o=0,s=this._events[n].length,a=new Array(s);s>o;o++)a[o]=this._events[n][o].fn;return a},o.prototype.emit=function(e,t,n,r,o,s){var a=i?i+e:e;if(!this._events||!this._events[a])return!1;var u,c,l=this._events[a],p=arguments.length;if("function"==typeof l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),p){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,r),!0;case 5:return l.fn.call(l.context,t,n,r,o),!0;case 6:return l.fn.call(l.context,t,n,r,o,s),!0}for(c=1,u=new Array(p-1);p>c;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var f,d=l.length;for(c=0;d>c;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),p){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,n);break;default:if(!u)for(f=1,u=new Array(p-1);p>f;f++)u[f-1]=arguments[f];l[c].fn.apply(l[c].context,u)}}return!0},o.prototype.on=function(e,t,n){var o=new r(t,n||this),s=i?i+e:e;return this._events||(this._events=i?{}:Object.create(null)),this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],o]:this._events[s].push(o):this._events[s]=o,this},o.prototype.once=function(e,t,n){var o=new r(t,n||this,!0),s=i?i+e:e;return this._events||(this._events=i?{}:Object.create(null)),this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],o]:this._events[s].push(o):this._events[s]=o,this},o.prototype.removeListener=function(e,t,n,r){var o=i?i+e:e;if(!this._events||!this._events[o])return this;var s=this._events[o],a=[];if(t)if(s.fn)(s.fn!==t||r&&!s.once||n&&s.context!==n)&&a.push(s);else for(var u=0,c=s.length;c>u;u++)(s[u].fn!==t||r&&!s[u].once||n&&s[u].context!==n)&&a.push(s[u]);return a.length?this._events[o]=1===a.length?a[0]:a:delete this._events[o],this},o.prototype.removeAllListeners=function(e){return this._events?(e?delete this._events[i?i+e:e]:this._events=i?{}:Object.create(null),this):this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=i,t.exports=o},{}],4:[function(e,t,n){"use strict";function r(e){for(var t,n=/([^=?&]+)=([^&]*)/g,r={};t=n.exec(e);r[decodeURIComponent(t[1])]=decodeURIComponent(t[2]));return r}function o(e,t){t=t||"";var n=[];"string"!=typeof t&&(t="?");for(var r in e)i.call(e,r)&&n.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return n.length?t+n.join("&"):""}var i=Object.prototype.hasOwnProperty;n.stringify=o,n.parse=r},{}],5:[function(e,t,n){"use strict";function r(e,t,n){return s(e in n?n[e]:e in t?t[e]:o[e])}function o(e){var t=this;return t instanceof o?(e=e||{},t.attempt=null,t._fn=null,t["reconnect timeout"]=r("reconnect timeout",t,e),t.retries=r("retries",t,e),t.factor=r("factor",t,e),t.max=r("max",t,e),t.min=r("min",t,e),void(t.timers=new u(t))):new o(e)}var i=e("eventemitter3"),s=e("millisecond"),a=e("demolish"),u=e("tick-tock"),c=e("one-time");o.prototype=new i,o.prototype.constructor=o,o["reconnect timeout"]="30 seconds",o.max=1/0,o.min="500 ms",o.retries=10,o.factor=2,o.prototype.reconnect=function(){var e=this;return e.backoff(function(t,n){return n.duration=+new Date-n.start,t?e.emit("reconnect failed",t,n):void e.emit("reconnected",n)},e.attempt)},o.prototype.backoff=function(e,t){var n=this;return t=t||n.attempt||{},t.backoff?n:(t["reconnect timeout"]=r("reconnect timeout",n,t),t.retries=r("retries",n,t),t.factor=r("factor",n,t),t.max=r("max",n,t),t.min=r("min",n,t),t.start=+t.start||+new Date,t.duration=+t.duration||0,t.attempt=+t.attempt||0,t.attempt===t.retries?(e.call(n,new Error("Unable to recover"),t),n):(t.backoff=!0,t.attempt++,n.attempt=t,t.scheduled=1!==t.attempt?Math.min(Math.round((Math.random()+1)*t.min*Math.pow(t.factor,t.attempt-1)),t.max):t.min,n.timers.setTimeout("reconnect",function(){t.duration=+new Date-t.start,t.backoff=!1,n.timers.clear("reconnect, timeout");var r=n._fn=c(function(r){return n.reset(),r?n.backoff(e,t):void e.call(n,void 0,t)});n.emit("reconnect",t,r),n.timers.setTimeout("timeout",function(){var e=new Error("Failed to reconnect in a timely manner");t.duration=+new Date-t.start,n.emit("reconnect timeout",e,t),r(e)},t["reconnect timeout"])},t.scheduled),n.emit("reconnect scheduled",t),n))},o.prototype.reconnecting=function(){return!!this.attempt},o.prototype.reconnected=function(e){return this._fn&&this._fn(e),this},o.prototype.reset=function(){return this._fn=this.attempt=null,this.timers.clear("reconnect, timeout"),this},o.prototype.destroy=a("timers attempt _fn"),t.exports=o},{demolish:1,eventemitter3:3,millisecond:6,"one-time":7,"tick-tock":8}],6:[function(e,t,n){t.exports=function(e){"use strict";if("string"!=typeof e||"0"===e||+e)return+e;var t,n=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e),r=1e3,o=60*r,i=60*o,s=24*i;if(!n)return 0;switch(t=parseFloat(n[1]),n[2].toLowerCase()){case"days":case"day":case"d":return t*s;case"hours":case"hour":case"hrs":case"hr":case"h":return t*i;case"minutes":case"minute":case"mins":case"min":case"m":return t*o;case"seconds":case"second":case"secs":case"sec":case"s":return t*r;default:return t}}},{}],7:[function(e,t,n){"use strict";t.exports=function(e){function t(){return r?n:(r=1,n=e.apply(this,arguments),e=null,n)}var n,r=0;return t.displayName=e.displayName||e.name||t.displayName||t.name,t}},{}],8:[function(e,t,n){"use strict";function r(e,t,n){this.clear=t,this.timer=e,this.fns=[n]}function o(e){clearTimeout(e)}function i(e){clearInterval(e)}function s(e){clearImmediate(e)}function a(e){return this instanceof a?(this.timers={},void(this.context=e||this)):new a(e)}var u=Object.prototype.hasOwnProperty,c=e("millisecond");a.prototype.tock=function(e,t){var n=this;return function(){if(e in n.timers){var r=n.timers[e],o=r.fns.slice(),i=o.length,s=0;for(t&&n.clear(e);i>s;s++)o[s].call(n.context)}}},a.prototype.setTimeout=function(e,t,n){var i=this;return i.timers[e]?(i.timers[e].fns.push(t),i):(i.timers[e]=new r(setTimeout(i.tock(e,!0),c(n)),o,t),i)},a.prototype.setInterval=function(e,t,n){var o=this;return o.timers[e]?(o.timers[e].fns.push(t),o):(o.timers[e]=new r(setInterval(o.tock(e),c(n)),i,t),o)},a.prototype.setImmediate=function(e,t){var n=this;return"function"!=typeof setImmediate?n.setTimeout(e,t,0):n.timers[e]?(n.timers[e].fns.push(t),n):(n.timers[e]=new r(setImmediate(n.tock(e,!0)),s,t),n)},a.prototype.active=function(e){return e in this.timers},a.prototype.clear=function(){var e,t,n,r=arguments.length?arguments:[],o=this;if(1===r.length&&"string"==typeof r[0]&&(r=r[0].split(/[, ]+/)),!r.length)for(e in o.timers)u.call(o.timers,e)&&r.push(e);for(t=0,n=r.length;n>t;t++)e=o.timers[r[t]],e&&(e.clear(e.timer),e.fns=e.timer=e.clear=null,delete o.timers[r[t]]);return o},a.prototype.end=a.prototype.destroy=function(){return this.context?(this.clear(),this.context=this.timers=null,!0):!1},a.prototype.adjust=function(e,t){var n,r=this,o=r.timers[e];return o?(n=o.clear===i,o.clear(o.timer),o.timer=(n?setInterval:setTimeout)(r.tock(e,!n),c(t)),r):r},t.exports=a},{millisecond:9}],9:[function(e,t,n){arguments[4][6][0].apply(n,arguments)},{dup:6}],10:[function(e,t,n){"use strict";function r(e,t,n){if(!(this instanceof r))return new r(e,t,n);var c,l,p,f,d=a.test(e),h=typeof t,m=this,v=0;for("object"!==h&&"string"!==h&&(n=t,t=null),n&&"function"!=typeof n&&(n=s.parse),t=i(t);v<u.length;v++)l=u[v],c=l[0],f=l[1],c!==c?m[f]=e:"string"==typeof c?~(p=e.indexOf(c))&&("number"==typeof l[2]?(m[f]=e.slice(0,p),e=e.slice(p+l[2])):(m[f]=e.slice(p),e=e.slice(0,p))):(p=c.exec(e))&&(m[f]=p[1],e=e.slice(0,e.length-p[0].length)),m[f]=m[f]||(l[3]||"port"===f&&d?t[f]||"":""),l[4]&&(m[f]=m[f].toLowerCase());n&&(m.query=n(m.query)),o(m.port,m.protocol)||(m.host=m.hostname,m.port=""),m.username=m.password="",m.auth&&(l=m.auth.split(":"),m.username=l[0]||"",m.password=l[1]||""),m.href=m.toString()}var o=e("requires-port"),i=e("./lolcation"),s=e("querystringify"),a=/^\/(?!\/)/,u=[["#","hash"],["?","query"],["//","protocol",2,1,1],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/\:(\d+)$/,"port"],[NaN,"hostname",void 0,1,1]];r.prototype.set=function(e,t,n){var r=this;return"query"===e?("string"==typeof t&&(t=(n||s.parse)(t)),r[e]=t):"port"===e?(r[e]=t,o(t,r.protocol)?t&&(r.host=r.hostname+":"+t):(r.host=r.hostname,r[e]="")):"hostname"===e?(r[e]=t,r.port&&(t+=":"+r.port),r.host=t):"host"===e?(r[e]=t,/\:\d+/.test(t)&&(t=t.split(":"),r.hostname=t[0],r.port=t[1])):r[e]=t,r.href=r.toString(),r},r.prototype.toString=function(e){e&&"function"==typeof e||(e=s.stringify);var t,n=this,r=n.protocol+"//";return n.username&&(r+=n.username,n.password&&(r+=":"+n.password),r+="@"),r+=n.hostname,n.port&&(r+=":"+n.port),r+=n.pathname,n.query&&(t="object"==typeof n.query?e(n.query):n.query,r+=("?"===t.charAt(0)?"":"?")+t),n.hash&&(r+=n.hash),r},r.qs=s,r.location=i,t.exports=r},{"./lolcation":11,querystringify:4,"requires-port":12}],11:[function(e,t,r){(function(n){"use strict";var r,o={hash:1,query:1};t.exports=function(t){t=t||n.location||{},r=r||e("./");var i,s={},a=typeof t;if("blob:"===t.protocol)s=new r(unescape(t.pathname),{});else if("string"===a){s=new r(t,{});for(i in o)delete s[i]}else if("object"===a)for(i in t)i in o||(s[i]=t[i]);return s}}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./":10}],12:[function(e,t,n){"use strict";t.exports=function(e,t){if(t=t.split(":")[0],e=+e,!e)return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 22!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},{}],13:[function(e,n,r){"use strict";function o(e,t){if(!(e instanceof i)){var n=new Error("Primus#"+t+"'s context should called with a Primus instance");if("function"!=typeof e.listeners||!e.listeners("error").length)throw n;e.emit("error",n)}}function i(e,t){if(!(this instanceof i))return new i(e,t);if("function"!=typeof this.client){var n="The client library has not been compiled correctly, see https://github.com/primus/primus#client-library for more details";return this.critical(new Error(n))}"object"==typeof e?(t=e,e=t.url||t.uri||s):t=t||{};var r=this;t.queueSize="queueSize"in t?t.queueSize:1/0,t.timeout="timeout"in t?t.timeout:1e4,t.reconnect="reconnect"in t?t.reconnect:{},t.ping="ping"in t?t.ping:25e3,t.pong="pong"in t?t.pong:1e4,t.strategy="strategy"in t?t.strategy:[],t.transport="transport"in t?t.transport:{},r.buffer=[],r.writable=!0,r.readable=!0,r.url=r.parse(e||s),r.readyState=i.CLOSED,r.options=t,r.timers=new u(this),r.socket=null,r.latency=0,r.stamps=0,r.disconnect=!1,r.transport=t.transport,r.transformers={outgoing:[],incoming:[]},r.recovery=new c(t.reconnect),"string"==typeof t.strategy&&(t.strategy=t.strategy.split(/\s?\,\s?/g)),!1===t.strategy?t.strategy=[]:t.strategy.length||(t.strategy.push("disconnect","online"),this.authorization||t.strategy.push("timeout")),t.strategy=t.strategy.join(",").toLowerCase(),"websockets"in t&&(r.AVOID_WEBSOCKETS=!t.websockets),"network"in t&&(r.NETWORK_EVENTS=t.network),t.manual||r.timers.setTimeout("open",function(){r.timers.clear("open"),r.open()},0),r.initialise(t)}var s,a=e("eventemitter3"),u=e("tick-tock"),c=e("recovery"),l=e("querystringify"),p=e("demolish"),f=/\u2028/g,d=/\u2029/g;try{s=location.origin?location.origin:location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")}catch(h){s="http://127.0.0.1"}i.require=function(n){return"function"!=typeof e?void 0:"function"==typeof t&&t.amd?void 0:e(n)};var m;try{i.Stream=m=i.require("stream"),i.require("util").inherits(i,m)}catch(h){i.Stream=a,i.prototype=new a}i.OPENING=1,i.CLOSED=2,i.OPEN=3,i.prototype.AVOID_WEBSOCKETS=!1,i.prototype.NETWORK_EVENTS=!1,i.prototype.online=!0;try{(i.prototype.NETWORK_EVENTS="onLine"in navigator&&(window.addEventListener||document.body.attachEvent))&&(navigator.onLine||(i.prototype.online=!1))}catch(h){}if(i.prototype.ark={},i.prototype.emits=e("emits"),i.prototype.trigger=function(){for(var e=0,t=arguments.length,n=new Array(t);t>e;e++)n[e]=arguments[e];return"function"!=typeof n[t-1]&&n.push(function(e){setTimeout(e,0)}),this.emits.apply(this,n)},i.prototype.plugin=function(e){if(o(this,"plugin"),e)return this.ark[e];var t={};for(e in this.ark)t[e]=this.ark[e];return t},i.prototype.reserved=function(e){return/^(incoming|outgoing)::/.test(e)||e in this.reserved.events},i.prototype.reserved.events={"reconnect scheduled":1,"reconnect timeout":1,readyStateChange:1,"reconnect failed":1,reconnected:1,reconnect:1,offline:1,timeout:1,online:1,error:1,close:1,open:1,data:1,end:1},i.prototype.initialise=function(e){function t(){o.online&&(o.online=!1,o.emit("offline"),o.end(),o.recovery.reset())}function n(){o.online||(o.online=!0,o.emit("online"),~o.options.strategy.indexOf("online")&&o.recovery.reconnect())}var r,o=this;o.recovery.on("reconnected",o.emits("reconnected")).on("reconnect failed",o.emits("reconnect failed",function(e){return o.emit("end"),e})).on("reconnect timeout",o.emits("reconnect timeout")).on("reconnect scheduled",o.emits("reconnect scheduled")).on("reconnect",o.emits("reconnect",function(e){o.emit("outgoing::reconnect"),e()})),o.on("outgoing::open",function(){var e=o.readyState;o.readyState=i.OPENING,e!==o.readyState&&o.emit("readyStateChange","opening"),r=+new Date}),o.on("incoming::open",function(){var e=o.readyState;if(o.recovery.reconnecting()&&o.recovery.reconnected(),o.writable=!0,o.readable=!0,o.online||(o.online=!0,o.emit("online")),o.readyState=i.OPEN,e!==o.readyState&&o.emit("readyStateChange","open"),o.latency=+new Date-r,o.timers.clear("ping","pong"),o.heartbeat(),o.buffer.length){var t=o.buffer.slice(),n=t.length,s=0;for(o.buffer.length=0;n>s;s++)o._write(t[s])}o.emit("open")}),o.on("incoming::pong",function(e){o.online=!0,o.timers.clear("pong"),o.heartbeat(),o.latency=+new Date-e}),o.on("incoming::error",function(e){var t=o.timers.active("connect"),n=e;if("string"==typeof e)n=new Error(e);else if(!(e instanceof Error)&&"object"==typeof e){n=new Error(e.message||e.reason);for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return o.recovery.reconnecting()?o.recovery.reconnected(n):(o.listeners("error").length&&o.emit("error",n),void(t&&(~o.options.strategy.indexOf("timeout")?o.recovery.reconnect():o.end())))}),o.on("incoming::data",function(e){o.decoder(e,function(t,n){return t?o.listeners("error").length&&o.emit("error",t):void(o.protocol(n)||o.transforms(o,o,"incoming",n,e))})}),o.on("incoming::end",function(){var e=o.readyState;return o.disconnect?(o.disconnect=!1,o.end()):(o.readyState=i.CLOSED,e!==o.readyState&&o.emit("readyStateChange","end"),o.timers.active("connect")&&o.end(),e!==i.OPEN?o.recovery.reconnecting()?o.recovery.reconnect():!1:(this.writable=!1,this.readable=!1,this.timers.clear(),o.emit("close"),~o.options.strategy.indexOf("disconnect")?o.recovery.reconnect():(o.emit("outgoing::end"),void o.emit("end"))))}),o.client();for(var s in o.ark)o.ark[s].call(o,o,e);
return o.NETWORK_EVENTS?(window.addEventListener?(window.addEventListener("offline",t,!1),window.addEventListener("online",n,!1)):document.body.attachEvent&&(document.body.attachEvent("onoffline",t),document.body.attachEvent("ononline",n)),o):o},i.prototype.protocol=function(e){if("string"!=typeof e||0!==e.indexOf("primus::"))return!1;var t=e.indexOf(":",8),n=e.slice(t+2);switch(e.slice(8,t)){case"pong":this.emit("incoming::pong",+n);break;case"server":"close"===n&&(this.disconnect=!0);break;case"id":this.emit("incoming::id",n);break;default:return!1}return!0},i.prototype.transforms=function(e,t,n,r,o){var i={data:r},s=e.transformers[n];return function a(e,n){var r=s[e++];if(!r)return n();if(1===r.length){if(!1===r.call(t,i))return;return a(e,n)}r.call(t,i,function(r,o){return r?t.emit("error",r):void(!1!==o&&a(e,n))})}(0,function(){return"incoming"===n?t.emit("data",i.data,o):void t._write(i.data)}),this},i.prototype.id=function(e){return this.socket&&this.socket.id?e(this.socket.id):(this._write("primus::id::"),this.once("incoming::id",e))},i.prototype.open=function(){return o(this,"open"),!this.recovery.reconnecting()&&this.options.timeout&&this.timeout(),this.emit("outgoing::open"),this},i.prototype.write=function(e){return o(this,"write"),this.transforms(this,this,"outgoing",e),!0},i.prototype._write=function(e){var t=this;return i.OPEN!==t.readyState?(this.buffer.length===this.options.queueSize&&this.buffer.splice(0,1),this.buffer.push(e),!1):(t.encoder(e,function(e,n){return e?t.listeners("error").length&&t.emit("error",e):("string"==typeof n&&(~n.indexOf("\u2028")&&(n=n.replace(f,"\\u2028")),~n.indexOf("\u2029")&&(n=n.replace(d,"\\u2029"))),void t.emit("outgoing::data",n))}),!0)},i.prototype.heartbeat=function(){function e(){n.timers.clear("pong"),n.online&&(n.online=!1,n.emit("offline"),n.emit("incoming::end"))}function t(){var t=+new Date;n.timers.clear("ping"),n._write("primus::ping::"+t),n.emit("outgoing::ping",t),n.timers.setTimeout("pong",e,n.options.pong)}var n=this;return n.options.ping?(n.timers.setTimeout("ping",t,n.options.ping),this):n},i.prototype.timeout=function(){function e(){t.removeListener("error",e).removeListener("open",e).removeListener("end",e).timers.clear("connect")}var t=this;return t.timers.setTimeout("connect",function(){e(),t.readyState===i.OPEN||t.recovery.reconnecting()||(t.emit("timeout"),~t.options.strategy.indexOf("timeout")?t.recovery.reconnect():t.end())},t.options.timeout),t.on("error",e).on("open",e).on("end",e)},i.prototype.end=function(e){if(o(this,"end"),this.readyState===i.CLOSED&&!this.timers.active("connect")&&!this.timers.active("open"))return this.recovery.reconnecting()&&(this.recovery.reset(),this.emit("end")),this;void 0!==e&&this.write(e),this.writable=!1,this.readable=!1;var t=this.readyState;return this.readyState=i.CLOSED,t!==this.readyState&&this.emit("readyStateChange","end"),this.timers.clear(),this.emit("outgoing::end"),this.emit("close"),this.emit("end"),this},i.prototype.destroy=p("url timers options recovery socket transport transformers",{before:"end",after:"removeAllListeners"}),i.prototype.clone=function(e){return this.merge({},e)},i.prototype.merge=function(e){for(var t,n,r=Array.prototype.slice.call(arguments,1),o=0,i=r.length;i>o;o++){n=r[o];for(t in n)n.hasOwnProperty(t)&&(e[t]=n[t])}return e},i.prototype.parse=e("url-parse"),i.prototype.querystring=l.parse,i.prototype.querystringify=l.stringify,i.prototype.uri=function(e){var t=this.url,n=[],r=!1;e.query&&(r=!0),e=e||{},e.protocol="protocol"in e?e.protocol:"http:",e.query=t.query&&r?t.query.slice(1):!1,e.secure="secure"in e?e.secure:"https:"===t.protocol||"wss:"===t.protocol,e.auth="auth"in e?e.auth:t.auth,e.pathname="pathname"in e?e.pathname:this.pathname,e.port="port"in e?+e.port:+t.port||(e.secure?443:80),this.emit("outgoing::url",e);var o=this.querystring(e.query||"");return o._primuscb=+new Date+"-"+this.stamps++,e.query=this.querystringify(o),n.push(e.secure?e.protocol.replace(":","s:"):e.protocol,""),n.push(e.auth?e.auth+"@"+t.host:t.host),e.pathname&&n.push(e.pathname.slice(1)),r?n.push("?"+e.query):delete e.query,e.object?e:n.join("/")},i.prototype.transform=function(e,t){return o(this,"transform"),e in this.transformers?(this.transformers[e].push(t),this):this.critical(new Error("Invalid transformer type"))},i.prototype.critical=function(e){if(this.listeners("error").length)return this.emit("error",e),this;throw e},i.connect=function(e,t){return new i(e,t)},i.EventEmitter=a,i.prototype.client=function(){var e,t=this,n=function(){if("undefined"!=typeof SockJS)return SockJS;try{return i.require("sockjs-client")}catch(e){}return void 0}();return n?(t.on("outgoing::open",function(){t.emit("outgoing::end"),t.socket=e=new n(t.uri({protocol:"http:",query:!0}),null,t.merge(t.transport,{info:{websocket:!t.AVOID_WEBSOCKETS,cookie_needed:!0}})),e.onopen=t.trigger("incoming::open"),e.onerror=t.trigger("incoming::error"),e.onclose=function(e){setTimeout(function(){e&&e.code>1e3&&t.emit("incoming::error",e),t.emit("incoming::end")},0)},e.onmessage=t.trigger("incoming::data",function(e,t){setTimeout(function(){e(void 0,t.data)},0)})}),t.on("outgoing::data",function(t){e&&e.send(t)}),t.on("outgoing::reconnect",function(){t.emit("outgoing::open")}),void t.on("outgoing::end",function(){e&&(e.onerror=e.onopen=e.onclose=e.onmessage=function(){},e.close(),e=null)})):t.critical(new Error("Missing required `sockjs-client` module. Please run `npm install --save sockjs-client`"))},i.prototype.authorization=!1,i.prototype.pathname="/primus",i.prototype.encoder=function(e,t){var n;try{e=JSON.stringify(e)}catch(r){n=r}t(n,e)},i.prototype.decoder=function(e,t){var n;if("string"!=typeof e)return t(n,e);try{e=JSON.parse(e)}catch(r){n=r}t(n,e)},i.prototype.version="3.1.1","undefined"!=typeof document&&"undefined"!=typeof navigator){document.addEventListener&&document.addEventListener("keydown",function(e){27===e.keyCode&&e.preventDefault&&e.preventDefault()},!1);var v=(navigator.userAgent||"").toLowerCase(),y=v.match(/.+(?:rv|it|ra|ie)[\/: ](\d+)\.(\d+)(?:\.(\d+))?/)||[],g=+[y[1],y[2]].join(".");!~v.indexOf("chrome")&&~v.indexOf("safari")&&534.54>g&&(i.prototype.AVOID_WEBSOCKETS=!0)}n.exports=i},{demolish:1,emits:2,eventemitter3:3,querystringify:4,recovery:5,"tick-tock":8,"url-parse":10}]},{},[13])(13);return r.prototype.ark.emit=function(e){var t=Object.prototype.toString,n=e.emit;e.transform("incoming",function(r){var o=r.data;if("object"==typeof o&&~t.call(o.emit).indexOf(" Array]"))return this.reserved(o.emit[0])||n.apply(e,o.emit),!1}),e.emit=function(t){return e.reserved(t)||"newListener"===t||"removeListener"===t?n.apply(this,arguments):(e.write({emit:Array.prototype.slice.call(arguments,0)}),!0)}},r}),function(t){!function(e){var t;"undefined"!=typeof window?t=window:"undefined"!=typeof self&&(t=self),t.SockJS=e()}(function(){var t;return function r(t,n,o){function i(a,u){if(!n[a]){if(!t[a]){var c="function"==typeof e&&e;if(!u&&c)return c(a,!0);if(s)return s(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var p=n[a]={exports:{}};t[a][0].call(p.exports,function(e){var n=t[a][1][e];return i(n?n:e)},p,p.exports,r,t,n,o)}return n[a].exports}for(var s="function"==typeof e&&e,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(e,t,r){(function(n){"use strict";var r=e("./transport-list");t.exports=e("./main")(r),"_sockjs_onload"in n&&setTimeout(n._sockjs_onload,1)}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./main":14,"./transport-list":16}],2:[function(e,t,n){"use strict";function r(){i.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}var o=e("inherits"),i=e("./event");o(r,i),t.exports=r},{"./event":4,inherits:54}],3:[function(e,t,n){"use strict";function r(){i.call(this)}var o=e("inherits"),i=e("./eventtarget");o(r,i),r.prototype.removeAllListeners=function(e){e?delete this._listeners[e]:this._listeners={}},r.prototype.once=function(e,t){function n(){r.removeListener(e,n),o||(o=!0,t.apply(this,arguments))}var r=this,o=!1;this.on(e,n)},r.prototype.emit=function(e){var t=this._listeners[e];if(t)for(var n=Array.prototype.slice.call(arguments,1),r=0;r<t.length;r++)t[r].apply(this,n)},r.prototype.on=r.prototype.addListener=i.prototype.addEventListener,r.prototype.removeListener=i.prototype.removeEventListener,t.exports.EventEmitter=r},{"./eventtarget":5,inherits:54}],4:[function(e,t,n){"use strict";function r(e){this.type=e}r.prototype.initEvent=function(e,t,n){return this.type=e,this.bubbles=t,this.cancelable=n,this.timeStamp=+new Date,this},r.prototype.stopPropagation=function(){},r.prototype.preventDefault=function(){},r.CAPTURING_PHASE=1,r.AT_TARGET=2,r.BUBBLING_PHASE=3,t.exports=r},{}],5:[function(e,t,n){"use strict";function r(){this._listeners={}}r.prototype.addEventListener=function(e,t){e in this._listeners||(this._listeners[e]=[]);var n=this._listeners[e];-1===n.indexOf(t)&&(n=n.concat([t])),this._listeners[e]=n},r.prototype.removeEventListener=function(e,t){var n=this._listeners[e];if(n){var r=n.indexOf(t);return-1!==r?void(n.length>1?this._listeners[e]=n.slice(0,r).concat(n.slice(r+1)):delete this._listeners[e]):void 0}},r.prototype.dispatchEvent=function(e){var t=e.type,n=Array.prototype.slice.call(arguments,0);if(this["on"+t]&&this["on"+t].apply(this,n),t in this._listeners)for(var r=this._listeners[t],o=0;o<r.length;o++)r[o].apply(this,n)},t.exports=r},{}],6:[function(e,t,n){"use strict";function r(e){i.call(this),this.initEvent("message",!1,!1),this.data=e}var o=e("inherits"),i=e("./event");o(r,i),t.exports=r},{"./event":4,inherits:54}],7:[function(e,t,n){"use strict";function r(e){this._transport=e,e.on("message",this._transportMessage.bind(this)),e.on("close",this._transportClose.bind(this))}var o=e("json3"),i=e("./utils/iframe");r.prototype._transportClose=function(e,t){i.postMessage("c",o.stringify([e,t]))},r.prototype._transportMessage=function(e){i.postMessage("t",e)},r.prototype._send=function(e){this._transport.send(e)},r.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},t.exports=r},{"./utils/iframe":47,json3:55}],8:[function(e,t,n){"use strict";var r=e("./utils/url"),o=e("./utils/event"),i=e("json3"),s=e("./facade"),a=e("./info-iframe-receiver"),u=e("./utils/iframe"),c=e("./location");t.exports=function(e,t){var n={};t.forEach(function(e){e.facadeTransport&&(n[e.facadeTransport.transportName]=e.facadeTransport)}),n[a.transportName]=a;var l;e.bootstrap_iframe=function(){var t;u.currentWindowId=c.hash.slice(1);var a=function(o){if(o.source===parent&&("undefined"==typeof l&&(l=o.origin),o.origin===l)){var a;try{a=i.parse(o.data)}catch(p){return}if(a.windowId===u.currentWindowId)switch(a.type){case"s":var f;try{f=i.parse(a.data)}catch(p){break}var d=f[0],h=f[1],m=f[2],v=f[3];if(d!==e.version)throw new Error('Incompatibile SockJS! Main site uses: "'+d+'", the iframe: "'+e.version+'".');if(!r.isOriginEqual(m,c.href)||!r.isOriginEqual(v,c.href))throw new Error("Can't connect to different domain from within an iframe. ("+c.href+", "+m+", "+v+")");t=new s(new n[h](m,v));break;case"m":t._send(a.data);break;case"c":t&&t._close(),t=null}}};o.attachEvent("message",a),u.postMessage("s")}}},{"./facade":7,"./info-iframe-receiver":10,"./location":13,"./utils/event":46,"./utils/iframe":47,"./utils/url":52,json3:55}],9:[function(e,t,n){"use strict";function r(e,t){o.call(this);var n=this,r=+new Date;this.xo=new t("GET",e),this.xo.once("finish",function(e,t){var o,i;if(200===e){if(i=+new Date-r,t)try{o=s.parse(t)}catch(u){}a.isObject(o)||(o={})}n.emit("finish",o,i),n.removeAllListeners()})}var o=e("events").EventEmitter,i=e("inherits"),s=e("json3"),a=e("./utils/object");i(r,o),r.prototype.close=function(){this.removeAllListeners(),this.xo.close()},t.exports=r},{"./utils/object":49,events:3,inherits:54,json3:55}],10:[function(e,t,n){"use strict";function r(e,t){var n=this;i.call(this),this.ir=new u(t,a),this.ir.once("finish",function(e,t){n.ir=null,n.emit("message",s.stringify([e,t]))})}var o=e("inherits"),i=e("events").EventEmitter,s=e("json3"),a=e("./transport/sender/xhr-local"),u=e("./info-ajax");o(r,i),r.transportName="iframe-info-receiver",r.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},t.exports=r},{"./info-ajax":9,"./transport/sender/xhr-local":37,events:3,inherits:54,json3:55}],11:[function(e,t,r){(function(n){"use strict";function r(e){var t=this;o.call(this);var r=function(){var n=t.ifr=new u(c.transportName,e,e);n.once("message",function(e){if(e){var n;try{n=s.parse(e)}catch(r){return t.emit("finish"),void t.close()}var o=n[0],i=n[1];t.emit("finish",o,i)}t.close()}),n.once("close",function(){t.emit("finish"),t.close()})};n.document.body?r():a.attachEvent("load",r)}var o=e("events").EventEmitter,i=e("inherits"),s=e("json3"),a=e("./utils/event"),u=e("./transport/iframe"),c=e("./info-iframe-receiver");i(r,o),r.enabled=function(){return u.enabled()},r.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null},t.exports=r}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./info-iframe-receiver":10,"./transport/iframe":22,"./utils/event":46,events:3,inherits:54,json3:55}],12:[function(e,t,n){"use strict";function r(e,t){var n=this;o.call(this),setTimeout(function(){n.doXhr(e,t)},0)}var o=e("events").EventEmitter,i=e("inherits"),s=e("./utils/url"),a=e("./transport/sender/xdr"),u=e("./transport/sender/xhr-cors"),c=e("./transport/sender/xhr-local"),l=e("./transport/sender/xhr-fake"),p=e("./info-iframe"),f=e("./info-ajax");i(r,o),r._getReceiver=function(e,t){return t.sameOrigin?new f(e,c):u.enabled?new f(e,u):a.enabled&&t.sameScheme?new f(e,a):p.enabled()?new p(e):new f(e,l)},r.prototype.doXhr=function(e,t){var n=this,o=s.addPath(e,"/info");this.xo=r._getReceiver(o,t),this.timeoutRef=setTimeout(function(){n._cleanup(!1),n.emit("finish")},r.timeout),this.xo.once("finish",function(e,t){n._cleanup(!0),n.emit("finish",e,t)})},r.prototype._cleanup=function(e){clearTimeout(this.timeoutRef),this.timeoutRef=null,!e&&this.xo&&this.xo.close(),this.xo=null},r.prototype.close=function(){this.removeAllListeners(),this._cleanup(!1)},r.timeout=8e3,t.exports=r},{"./info-ajax":9,"./info-iframe":11,"./transport/sender/xdr":34,"./transport/sender/xhr-cors":35,"./transport/sender/xhr-fake":36,"./transport/sender/xhr-local":37,"./utils/url":52,events:3,inherits:54}],13:[function(e,t,r){(function(e){"use strict";t.exports=e.location||{origin:"http://localhost:80",protocol:"http",host:"localhost",port:80,href:"http://localhost/",hash:""}}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],14:[function(e,t,r){(function(n){"use strict";function r(e,t,n){if(!(this instanceof r))return new r(e,t,n);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");g.call(this),this.readyState=r.CONNECTING,this.extensions="",this.protocol="",n=n||{},n.protocols_whitelist&&v.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=n.transports,this._server=n.server||c.numberString(1e3);var o=new s(e);if(!o.host||!o.protocol)throw new SyntaxError("The URL '"+e+"' is invalid");if(o.hash)throw new SyntaxError("The URL must not contain a fragment");if("http:"!==o.protocol&&"https:"!==o.protocol)throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+o.protocol+"' is not allowed.");var i="https:"===o.protocol;if("https"===b.protocol&&!i)throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");t?Array.isArray(t)||(t=[t]):t=[];var a=t.sort();a.forEach(function(e,t){if(!e)throw new SyntaxError("The protocols entry '"+e+"' is invalid.");if(t<a.length-1&&e===a[t+1])throw new SyntaxError("The protocols entry '"+e+"' is duplicated.")});var u=p.getOrigin(b.href);this._origin=u?u.toLowerCase():null,o.set("pathname",o.pathname.replace(/\/+$/,"")),this.url=o.href,this._urlInfo={nullOrigin:!m.hasDomain(),sameOrigin:p.isOriginEqual(this.url,b.href),sameScheme:p.isSchemeEqual(this.url,b.href)},this._ir=new _(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}function o(e){return 1e3===e||e>=3e3&&4999>=e}e("./shims");var i,s=e("url-parse"),a=e("inherits"),u=e("json3"),c=e("./utils/random"),l=e("./utils/escape"),p=e("./utils/url"),f=e("./utils/event"),d=e("./utils/transport"),h=e("./utils/object"),m=e("./utils/browser"),v=e("./utils/log"),y=e("./event/event"),g=e("./event/eventtarget"),b=e("./location"),w=e("./event/close"),x=e("./event/trans-message"),_=e("./info-receiver");a(r,g),r.prototype.close=function(e,t){if(e&&!o(e))throw new Error("InvalidAccessError: Invalid code");if(t&&t.length>123)throw new SyntaxError("reason argument has an invalid length");if(this.readyState!==r.CLOSING&&this.readyState!==r.CLOSED){var n=!0;this._close(e||1e3,t||"Normal closure",n)}},r.prototype.send=function(e){if("string"!=typeof e&&(e=""+e),this.readyState===r.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===r.OPEN&&this._transport.send(l.quote(e))},r.version=e("./version"),r.CONNECTING=0,r.OPEN=1,r.CLOSING=2,r.CLOSED=3,r.prototype._receiveInfo=function(e,t){if(this._ir=null,!e)return void this._close(1002,"Cannot connect to server");this._rto=this.countRTO(t),this._transUrl=e.base_url?e.base_url:this.url,e=h.extend(e,this._urlInfo);var n=i.filterToEnabled(this._transportsWhitelist,e);this._transports=n.main,this._connect()},r.prototype._connect=function(){for(var e=this._transports.shift();e;e=this._transports.shift()){if(e.needBody&&(!n.document.body||"undefined"!=typeof n.document.readyState&&"complete"!==n.document.readyState&&"interactive"!==n.document.readyState))return this._transports.unshift(e),void f.attachEvent("load",this._connect.bind(this));var t=this._rto*e.roundTrips||5e3;this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),t);var r=p.addPath(this._transUrl,"/"+this._server+"/"+c.string(8)),o=new e(r,this._transUrl);return o.on("message",this._transportMessage.bind(this)),o.once("close",this._transportClose.bind(this)),o.transportName=e.transportName,void(this._transport=o)}this._close(2e3,"All transports failed",!1)},r.prototype._transportTimeout=function(){this.readyState===r.CONNECTING&&this._transportClose(2007,"Transport timed out")},r.prototype._transportMessage=function(e){var t,n=this,r=e.slice(0,1),o=e.slice(1);switch(r){case"o":return void this._open();case"h":return void this.dispatchEvent(new y("heartbeat"))}if(o)try{t=u.parse(o)}catch(i){}if("undefined"!=typeof t)switch(r){case"a":Array.isArray(t)&&t.forEach(function(e){n.dispatchEvent(new x(e))});break;case"m":this.dispatchEvent(new x(t));break;case"c":Array.isArray(t)&&2===t.length&&this._close(t[0],t[1],!0)}},r.prototype._transportClose=function(e,t){return this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),o(e)||2e3===e||this.readyState!==r.CONNECTING?void this._close(e,t):void this._connect()},r.prototype._open=function(){this.readyState===r.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=r.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new y("open"))):this._close(1006,"Server lost session")},r.prototype._close=function(e,t,n){var o=!1;if(this._ir&&(o=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===r.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=r.CLOSING,setTimeout(function(){this.readyState=r.CLOSED,o&&this.dispatchEvent(new y("error"));var i=new w("close");i.wasClean=n||!1,i.code=e||1e3,i.reason=t,this.dispatchEvent(i),this.onmessage=this.onclose=this.onerror=null}.bind(this),0)},r.prototype.countRTO=function(e){return e>100?4*e:300+e},t.exports=function(t){return i=d(t),e("./iframe-bootstrap")(r,t),r}}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./event/close":2,"./event/event":4,"./event/eventtarget":5,"./event/trans-message":6,"./iframe-bootstrap":8,"./info-receiver":12,"./location":13,"./shims":15,"./utils/browser":44,"./utils/escape":45,"./utils/event":46,"./utils/log":48,"./utils/object":49,"./utils/random":50,"./utils/transport":51,"./utils/url":52,"./version":53,inherits:54,json3:55,"url-parse":56}],15:[function(e,t,n){"use strict";function r(e){var t=+e;return t!==t?t=0:0!==t&&t!==1/0&&t!==-(1/0)&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t}function o(e){return e>>>0}function i(){}var s,a=Array.prototype,u=Object.prototype,c=Function.prototype,l=String.prototype,p=a.slice,f=u.toString,d=function(e){return"[object Function]"===u.toString.call(e)},h=function(e){return"[object Array]"===f.call(e)},m=function(e){return"[object String]"===f.call(e)},v=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}();s=v?function(e,t,n,r){!r&&t in e||Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n})}:function(e,t,n,r){!r&&t in e||(e[t]=n)};var y=function(e,t,n){for(var r in t)u.hasOwnProperty.call(t,r)&&s(e,r,t[r],n)},g=function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return Object(e)};y(c,{bind:function(e){var t=this;if(!d(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var n=p.call(arguments,1),r=function(){if(this instanceof u){var r=t.apply(this,n.concat(p.call(arguments)));return Object(r)===r?r:this}return t.apply(e,n.concat(p.call(arguments)))},o=Math.max(0,t.length-n.length),s=[],a=0;o>a;a++)s.push("$"+a);var u=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this, arguments); }")(r);return t.prototype&&(i.prototype=t.prototype,u.prototype=new i,i.prototype=null),u}}),y(Array,{isArray:h});var b=Object("a"),w="a"!==b[0]||!(0 in b),x=function(e){var t=!0,n=!0;return e&&(e.call("foo",function(e,n,r){"object"!=typeof r&&(t=!1)}),e.call([1],function(){n="string"==typeof this},"x")),!!e&&t&&n};y(a,{forEach:function(e){var t=g(this),n=w&&m(this)?this.split(""):t,r=arguments[1],o=-1,i=n.length>>>0;if(!d(e))throw new TypeError;for(;++o<i;)o in n&&e.call(r,n[o],o,t)}},!x(a.forEach));var _=Array.prototype.indexOf&&-1!==[0,1].indexOf(1,2);y(a,{indexOf:function(e){var t=w&&m(this)?this.split(""):g(this),n=t.length>>>0;if(!n)return-1;var o=0;for(arguments.length>1&&(o=r(arguments[1])),o=o>=0?o:Math.max(0,n+o);n>o;o++)if(o in t&&t[o]===e)return o;return-1}},_);var k=l.split;2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?!function(){var e=void 0===/()??/.exec("")[1];l.split=function(t,n){var r=this;if(void 0===t&&0===n)return[];if("[object RegExp]"!==f.call(t))return k.call(this,t,n);var i,s,u,c,l=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.extended?"x":"")+(t.sticky?"y":""),d=0;for(t=new RegExp(t.source,p+"g"),r+="",e||(i=new RegExp("^"+t.source+"$(?!\\s)",p)),n=void 0===n?-1>>>0:o(n);(s=t.exec(r))&&(u=s.index+s[0].length,!(u>d&&(l.push(r.slice(d,s.index)),!e&&s.length>1&&s[0].replace(i,function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(s[e]=void 0)}),s.length>1&&s.index<r.length&&a.push.apply(l,s.slice(1)),c=s[0].length,d=u,l.length>=n)));)t.lastIndex===s.index&&t.lastIndex++;return d===r.length?(c||!t.test(""))&&l.push(""):l.push(r.slice(d)),l.length>n?l.slice(0,n):l}}():"0".split(void 0,0).length&&(l.split=function(e,t){return void 0===e&&0===t?[]:k.call(this,e,t)});var E="	\n\f\r   ᠎             　\u2028\u2029\ufeff",S="​",L="["+E+"]",j=new RegExp("^"+L+L+"*"),T=new RegExp(L+L+"*$"),O=l.trim&&(E.trim()||!S.trim());y(l,{trim:function(){if(void 0===this||null===this)throw new TypeError("can't convert "+this+" to object");return String(this).replace(j,"").replace(T,"")}},O);var C=l.substr,A="".substr&&"b"!=="0b".substr(-1);y(l,{substr:function(e,t){return C.call(this,0>e&&(e=this.length+e)<0?0:e,t)}},A)},{}],16:[function(e,t,n){"use strict";t.exports=[e("./transport/websocket"),e("./transport/xhr-streaming"),e("./transport/xdr-streaming"),e("./transport/eventsource"),e("./transport/lib/iframe-wrap")(e("./transport/eventsource")),e("./transport/htmlfile"),e("./transport/lib/iframe-wrap")(e("./transport/htmlfile")),e("./transport/xhr-polling"),e("./transport/xdr-polling"),e("./transport/lib/iframe-wrap")(e("./transport/xhr-polling")),e("./transport/jsonp-polling")]},{"./transport/eventsource":20,"./transport/htmlfile":21,"./transport/jsonp-polling":23,"./transport/lib/iframe-wrap":26,"./transport/websocket":38,"./transport/xdr-polling":39,"./transport/xdr-streaming":40,"./transport/xhr-polling":41,"./transport/xhr-streaming":42}],17:[function(e,t,r){(function(n){"use strict";function r(e,t,n,r){var i=this;o.call(this),setTimeout(function(){i._start(e,t,n,r)},0)}var o=e("events").EventEmitter,i=e("inherits"),s=e("../../utils/event"),a=e("../../utils/url"),u=n.XMLHttpRequest;i(r,o),r.prototype._start=function(e,t,n,o){var i=this;try{this.xhr=new u}catch(c){}if(!this.xhr)return this.emit("finish",0,"no xhr support"),void this._cleanup();t=a.addQuery(t,"t="+ +new Date),this.unloadRef=s.unloadAdd(function(){i._cleanup(!0)});try{this.xhr.open(e,t,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){i.emit("finish",0,""),i._cleanup(!1)})}catch(l){return this.emit("finish",0,""),void this._cleanup(!1)}if(o&&o.noCredentials||!r.supportsCORS||(this.xhr.withCredentials="true"),o&&o.headers)for(var p in o.headers)this.xhr.setRequestHeader(p,o.headers[p]);this.xhr.onreadystatechange=function(){if(i.xhr){var e,t,n=i.xhr;switch(n.readyState){case 3:try{t=n.status,e=n.responseText}catch(r){}1223===t&&(t=204),200===t&&e&&e.length>0&&i.emit("chunk",t,e);break;case 4:t=n.status,1223===t&&(t=204),(12005===t||12029===t)&&(t=0),i.emit("finish",t,n.responseText),i._cleanup(!1)}}};try{i.xhr.send(n)}catch(l){i.emit("finish",0,""),i._cleanup(!1)}},r.prototype._cleanup=function(e){if(this.xhr){if(this.removeAllListeners(),s.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),e)try{this.xhr.abort()}catch(t){}this.unloadRef=this.xhr=null}},r.prototype.close=function(){this._cleanup(!0)},r.enabled=!!u;var c=["Active"].concat("Object").join("X");!r.enabled&&c in n&&(u=function(){try{return new n[c]("Microsoft.XMLHTTP")}catch(e){return null}},r.enabled=!!new u);var l=!1;try{l="withCredentials"in new u}catch(p){}r.supportsCORS=l,t.exports=r}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/event":46,"../../utils/url":52,events:3,inherits:54}],18:[function(e,t,r){(function(e){t.exports=e.EventSource}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],19:[function(e,t,r){(function(e){t.exports=e.WebSocket||e.MozWebSocket}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],20:[function(e,t,n){"use strict";function r(e){if(!r.enabled())throw new Error("Transport created when disabled");i.call(this,e,"/eventsource",s,a)}var o=e("inherits"),i=e("./lib/ajax-based"),s=e("./receiver/eventsource"),a=e("./sender/xhr-cors"),u=e("eventsource");o(r,i),r.enabled=function(){return!!u},r.transportName="eventsource",r.roundTrips=2,t.exports=r},{"./lib/ajax-based":24,"./receiver/eventsource":29,"./sender/xhr-cors":35,eventsource:18,inherits:54}],21:[function(e,t,n){"use strict";function r(e){if(!i.enabled)throw new Error("Transport created when disabled");a.call(this,e,"/htmlfile",i,s)}var o=e("inherits"),i=e("./receiver/htmlfile"),s=e("./sender/xhr-local"),a=e("./lib/ajax-based");o(r,a),r.enabled=function(e){return i.enabled&&e.sameOrigin},r.transportName="htmlfile",r.roundTrips=2,t.exports=r},{"./lib/ajax-based":24,"./receiver/htmlfile":30,"./sender/xhr-local":37,inherits:54}],22:[function(e,t,n){"use strict";function r(e,t,n){if(!r.enabled())throw new Error("Transport created when disabled");s.call(this);var o=this;this.origin=u.getOrigin(n),this.baseUrl=n,this.transUrl=t,this.transport=e,this.windowId=p.string(8);var i=u.addPath(n,"/iframe.html")+"#"+this.windowId;this.iframeObj=c.createIframe(i,function(e){o.emit("close",1006,"Unable to load an iframe ("+e+")"),o.close()}),this.onmessageCallback=this._message.bind(this),l.attachEvent("message",this.onmessageCallback)}var o=e("inherits"),i=e("json3"),s=e("events").EventEmitter,a=e("../version"),u=e("../utils/url"),c=e("../utils/iframe"),l=e("../utils/event"),p=e("../utils/random");o(r,s),r.prototype.close=function(){if(this.removeAllListeners(),this.iframeObj){l.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch(e){}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},r.prototype._message=function(e){if(u.isOriginEqual(e.origin,this.origin)){var t;try{t=i.parse(e.data)}catch(n){return}if(t.windowId===this.windowId)switch(t.type){case"s":this.iframeObj.loaded(),this.postMessage("s",i.stringify([a,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",t.data);break;case"c":var r;try{r=i.parse(t.data)}catch(n){return}this.emit("close",r[0],r[1]),this.close()}}},r.prototype.postMessage=function(e,t){this.iframeObj.post(i.stringify({windowId:this.windowId,type:e,data:t||""}),this.origin)},r.prototype.send=function(e){this.postMessage("m",e)},r.enabled=function(){return c.iframeEnabled},r.transportName="iframe",r.roundTrips=2,t.exports=r},{"../utils/event":46,"../utils/iframe":47,"../utils/random":50,"../utils/url":52,"../version":53,events:3,inherits:54,json3:55}],23:[function(e,t,r){(function(n){"use strict";function r(e){if(!r.enabled())throw new Error("Transport created when disabled");i.call(this,e,"/jsonp",a,s)}var o=e("inherits"),i=e("./lib/sender-receiver"),s=e("./receiver/jsonp"),a=e("./sender/jsonp");o(r,i),r.enabled=function(){return!!n.document},r.transportName="jsonp-polling",r.roundTrips=1,r.needBody=!0,t.exports=r}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lib/sender-receiver":28,"./receiver/jsonp":31,"./sender/jsonp":33,inherits:54}],24:[function(e,t,n){"use strict";function r(e){return function(t,n,r){var o={};"string"==typeof n&&(o.headers={"Content-type":"text/plain"});var i=s.addPath(t,"/xhr_send"),a=new e("POST",i,n,o);return a.once("finish",function(e){return a=null,200!==e&&204!==e?r(new Error("http status "+e)):void r()}),function(){a.close(),a=null;var e=new Error("Aborted");e.code=1e3,r(e)}}}function o(e,t,n,o){a.call(this,e,t,r(o),n,o)}var i=e("inherits"),s=e("../../utils/url"),a=e("./sender-receiver");i(o,a),t.exports=o},{"../../utils/url":52,"./sender-receiver":28,inherits:54}],25:[function(e,t,n){"use strict";function r(e,t){i.call(this),this.sendBuffer=[],this.sender=t,this.url=e}var o=e("inherits"),i=e("events").EventEmitter;o(r,i),r.prototype.send=function(e){this.sendBuffer.push(e),this.sendStop||this.sendSchedule()},r.prototype.sendScheduleWait=function(){var e,t=this;this.sendStop=function(){t.sendStop=null,clearTimeout(e)},e=setTimeout(function(){t.sendStop=null,t.sendSchedule()},25)},r.prototype.sendSchedule=function(){var e=this;if(this.sendBuffer.length>0){var t="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,t,function(t){e.sendStop=null,t?(e.emit("close",t.code||1006,"Sending error: "+t),e._cleanup()):e.sendScheduleWait()}),this.sendBuffer=[]}},r.prototype._cleanup=function(){this.removeAllListeners();
},r.prototype.stop=function(){this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)},t.exports=r},{events:3,inherits:54}],26:[function(e,t,r){(function(n){"use strict";var r=e("inherits"),o=e("../iframe"),i=e("../../utils/object");t.exports=function(e){function t(t,n){o.call(this,e.transportName,t,n)}return r(t,o),t.enabled=function(t,r){if(!n.document)return!1;var s=i.extend({},r);return s.sameOrigin=!0,e.enabled(s)&&o.enabled()},t.transportName="iframe-"+e.transportName,t.needBody=!0,t.roundTrips=o.roundTrips+e.roundTrips-1,t.facadeTransport=e,t}}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/object":49,"../iframe":22,inherits:54}],27:[function(e,t,n){"use strict";function r(e,t,n){i.call(this),this.Receiver=e,this.receiveUrl=t,this.AjaxObject=n,this._scheduleReceiver()}var o=e("inherits"),i=e("events").EventEmitter;o(r,i),r.prototype._scheduleReceiver=function(){var e=this,t=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);t.on("message",function(t){e.emit("message",t)}),t.once("close",function(n,r){e.poll=t=null,e.pollIsClosing||("network"===r?e._scheduleReceiver():(e.emit("close",n||1006,r),e.removeAllListeners()))})},r.prototype.abort=function(){this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()},t.exports=r},{events:3,inherits:54}],28:[function(e,t,n){"use strict";function r(e,t,n,r,o){var u=i.addPath(e,t),c=this;s.call(this,e,n),this.poll=new a(r,u,o),this.poll.on("message",function(e){c.emit("message",e)}),this.poll.once("close",function(e,t){c.poll=null,c.emit("close",e,t),c.close()})}var o=e("inherits"),i=e("../../utils/url"),s=e("./buffered-sender"),a=e("./polling");o(r,s),r.prototype.close=function(){this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null),this.stop()},t.exports=r},{"../../utils/url":52,"./buffered-sender":25,"./polling":27,inherits:54}],29:[function(e,t,n){"use strict";function r(e){i.call(this);var t=this,n=this.es=new s(e);n.onmessage=function(e){t.emit("message",decodeURI(e.data))},n.onerror=function(e){var r=2!==n.readyState?"network":"permanent";t._cleanup(),t._close(r)}}var o=e("inherits"),i=e("events").EventEmitter,s=e("eventsource");o(r,i),r.prototype.abort=function(){this._cleanup(),this._close("user")},r.prototype._cleanup=function(){var e=this.es;e&&(e.onmessage=e.onerror=null,e.close(),this.es=null)},r.prototype._close=function(e){var t=this;setTimeout(function(){t.emit("close",null,e),t.removeAllListeners()},200)},t.exports=r},{events:3,eventsource:18,inherits:54}],30:[function(e,t,r){(function(n){"use strict";function r(e){a.call(this);var t=this;i.polluteGlobalNamespace(),this.id="a"+u.string(6),e=s.addQuery(e,"c="+decodeURIComponent(i.WPrefix+"."+this.id));var o=r.htmlfileEnabled?i.createHtmlfile:i.createIframe;n[i.WPrefix][this.id]={start:function(){t.iframeObj.loaded()},message:function(e){t.emit("message",e)},stop:function(){t._cleanup(),t._close("network")}},this.iframeObj=o(e,function(){t._cleanup(),t._close("permanent")})}var o=e("inherits"),i=e("../../utils/iframe"),s=e("../../utils/url"),a=e("events").EventEmitter,u=e("../../utils/random");o(r,a),r.prototype.abort=function(){this._cleanup(),this._close("user")},r.prototype._cleanup=function(){this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete n[i.WPrefix][this.id]},r.prototype._close=function(e){this.emit("close",null,e),this.removeAllListeners()},r.htmlfileEnabled=!1;var c=["Active"].concat("Object").join("X");if(c in n)try{r.htmlfileEnabled=!!new n[c]("htmlfile")}catch(l){}r.enabled=r.htmlfileEnabled||i.iframeEnabled,t.exports=r}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/iframe":47,"../../utils/random":50,"../../utils/url":52,events:3,inherits:54}],31:[function(e,t,r){(function(n){"use strict";function r(e){var t=this;c.call(this),o.polluteGlobalNamespace(),this.id="a"+i.string(6);var s=a.addQuery(e,"c="+encodeURIComponent(o.WPrefix+"."+this.id));n[o.WPrefix][this.id]=this._callback.bind(this),this._createScript(s),this.timeoutId=setTimeout(function(){t._abort(new Error("JSONP script loaded abnormally (timeout)"))},r.timeout)}var o=e("../../utils/iframe"),i=e("../../utils/random"),s=e("../../utils/browser"),a=e("../../utils/url"),u=e("inherits"),c=e("events").EventEmitter;u(r,c),r.prototype.abort=function(){if(n[o.WPrefix][this.id]){var e=new Error("JSONP user aborted read");e.code=1e3,this._abort(e)}},r.timeout=35e3,r.scriptErrorTimeout=1e3,r.prototype._callback=function(e){this._cleanup(),this.aborting||(e&&this.emit("message",e),this.emit("close",null,"network"),this.removeAllListeners())},r.prototype._abort=function(e){this._cleanup(),this.aborting=!0,this.emit("close",e.code,e.message),this.removeAllListeners()},r.prototype._cleanup=function(){if(clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var e=this.script;e.parentNode.removeChild(e),e.onreadystatechange=e.onerror=e.onload=e.onclick=null,this.script=null}delete n[o.WPrefix][this.id]},r.prototype._scriptError=function(){var e=this;this.errorTimer||(this.errorTimer=setTimeout(function(){e.loadedOkay||e._abort(new Error("JSONP script loaded abnormally (onerror)"))},r.scriptErrorTimeout))},r.prototype._createScript=function(e){var t,r=this,o=this.script=n.document.createElement("script");if(o.id="a"+i.string(8),o.src=e,o.type="text/javascript",o.charset="UTF-8",o.onerror=this._scriptError.bind(this),o.onload=function(){r._abort(new Error("JSONP script loaded abnormally (onload)"))},o.onreadystatechange=function(){if(/loaded|closed/.test(o.readyState)){if(o&&o.htmlFor&&o.onclick){r.loadedOkay=!0;try{o.onclick()}catch(e){}}o&&r._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},"undefined"==typeof o.async&&n.document.attachEvent)if(s.isOpera())t=this.script2=n.document.createElement("script"),t.text="try{var a = document.getElementById('"+o.id+"'); if(a)a.onerror();}catch(x){};",o.async=t.async=!1;else{try{o.htmlFor=o.id,o.event="onclick"}catch(a){}o.async=!0}"undefined"!=typeof o.async&&(o.async=!0);var u=n.document.getElementsByTagName("head")[0];u.insertBefore(o,u.firstChild),t&&u.insertBefore(t,u.firstChild)},t.exports=r}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/browser":44,"../../utils/iframe":47,"../../utils/random":50,"../../utils/url":52,events:3,inherits:54}],32:[function(e,t,n){"use strict";function r(e,t){i.call(this);var n=this;this.bufferPosition=0,this.xo=new t("POST",e,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",function(e,t){n._chunkHandler(e,t),n.xo=null;var r=200===e?"network":"permanent";n.emit("close",null,r),n._cleanup()})}var o=e("inherits"),i=e("events").EventEmitter;o(r,i),r.prototype._chunkHandler=function(e,t){if(200===e&&t)for(var n=-1;;this.bufferPosition+=n+1){var r=t.slice(this.bufferPosition);if(n=r.indexOf("\n"),-1===n)break;var o=r.slice(0,n);o&&this.emit("message",o)}},r.prototype._cleanup=function(){this.removeAllListeners()},r.prototype.abort=function(){this.xo&&(this.xo.close(),this.emit("close",null,"user"),this.xo=null),this._cleanup()},t.exports=r},{events:3,inherits:54}],33:[function(e,t,r){(function(n){"use strict";function r(e){try{return n.document.createElement('<iframe name="'+e+'">')}catch(t){var r=n.document.createElement("iframe");return r.name=e,r}}function o(){i=n.document.createElement("form"),i.style.display="none",i.style.position="absolute",i.method="POST",i.enctype="application/x-www-form-urlencoded",i.acceptCharset="UTF-8",s=n.document.createElement("textarea"),s.name="d",i.appendChild(s),n.document.body.appendChild(i)}var i,s,a=e("../../utils/random"),u=e("../../utils/url");t.exports=function(e,t,n){i||o();var c="a"+a.string(8);i.target=c,i.action=u.addQuery(u.addPath(e,"/jsonp_send"),"i="+c);var l=r(c);l.id=c,l.style.display="none",i.appendChild(l);try{s.value=t}catch(p){}i.submit();var f=function(e){l.onerror&&(l.onreadystatechange=l.onerror=l.onload=null,setTimeout(function(){l.parentNode.removeChild(l),l=null},500),s.value="",n(e))};return l.onerror=function(){f()},l.onload=function(){f()},l.onreadystatechange=function(e){"complete"===l.readyState&&f()},function(){f(new Error("Aborted"))}}}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/random":50,"../../utils/url":52}],34:[function(e,t,r){(function(n){"use strict";function r(e,t,n){var r=this;o.call(this),setTimeout(function(){r._start(e,t,n)},0)}var o=e("events").EventEmitter,i=e("inherits"),s=e("../../utils/event"),a=e("../../utils/browser"),u=e("../../utils/url");i(r,o),r.prototype._start=function(e,t,r){var o=this,i=new n.XDomainRequest;t=u.addQuery(t,"t="+ +new Date),i.onerror=function(){o._error()},i.ontimeout=function(){o._error()},i.onprogress=function(){o.emit("chunk",200,i.responseText)},i.onload=function(){o.emit("finish",200,i.responseText),o._cleanup(!1)},this.xdr=i,this.unloadRef=s.unloadAdd(function(){o._cleanup(!0)});try{this.xdr.open(e,t),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(r)}catch(a){this._error()}},r.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},r.prototype._cleanup=function(e){if(this.xdr){if(this.removeAllListeners(),s.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,e)try{this.xdr.abort()}catch(t){}this.unloadRef=this.xdr=null}},r.prototype.close=function(){this._cleanup(!0)},r.enabled=!(!n.XDomainRequest||!a.hasDomain()),t.exports=r}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/browser":44,"../../utils/event":46,"../../utils/url":52,events:3,inherits:54}],35:[function(e,t,n){"use strict";function r(e,t,n,r){i.call(this,e,t,n,r)}var o=e("inherits"),i=e("../driver/xhr");o(r,i),r.enabled=i.enabled&&i.supportsCORS,t.exports=r},{"../driver/xhr":17,inherits:54}],36:[function(e,t,n){"use strict";function r(){var e=this;o.call(this),this.to=setTimeout(function(){e.emit("finish",200,"{}")},r.timeout)}var o=e("events").EventEmitter,i=e("inherits");i(r,o),r.prototype.close=function(){clearTimeout(this.to)},r.timeout=2e3,t.exports=r},{events:3,inherits:54}],37:[function(e,t,n){"use strict";function r(e,t,n){i.call(this,e,t,n,{noCredentials:!0})}var o=e("inherits"),i=e("../driver/xhr");o(r,i),r.enabled=i.enabled,t.exports=r},{"../driver/xhr":17,inherits:54}],38:[function(e,t,n){"use strict";function r(e){if(!r.enabled())throw new Error("Transport created when disabled");a.call(this);var t=this,n=i.addPath(e,"/websocket");n="https"===n.slice(0,5)?"wss"+n.slice(5):"ws"+n.slice(4),this.url=n,this.ws=new u(this.url),this.ws.onmessage=function(e){t.emit("message",e.data)},this.unloadRef=o.unloadAdd(function(){t.ws.close()}),this.ws.onclose=function(e){t.emit("close",e.code,e.reason),t._cleanup()},this.ws.onerror=function(e){t.emit("close",1006,"WebSocket connection broken"),t._cleanup()}}var o=e("../utils/event"),i=e("../utils/url"),s=e("inherits"),a=e("events").EventEmitter,u=e("./driver/websocket");s(r,a),r.prototype.send=function(e){var t="["+e+"]";this.ws.send(t)},r.prototype.close=function(){this.ws&&this.ws.close(),this._cleanup()},r.prototype._cleanup=function(){var e=this.ws;e&&(e.onmessage=e.onclose=e.onerror=null),o.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},r.enabled=function(){return!!u},r.transportName="websocket",r.roundTrips=2,t.exports=r},{"../utils/event":46,"../utils/url":52,"./driver/websocket":19,events:3,inherits:54}],39:[function(e,t,n){"use strict";function r(e){if(!u.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr",a,u)}var o=e("inherits"),i=e("./lib/ajax-based"),s=e("./xdr-streaming"),a=e("./receiver/xhr"),u=e("./sender/xdr");o(r,i),r.enabled=s.enabled,r.transportName="xdr-polling",r.roundTrips=2,t.exports=r},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xdr":34,"./xdr-streaming":40,inherits:54}],40:[function(e,t,n){"use strict";function r(e){if(!a.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr_streaming",s,a)}var o=e("inherits"),i=e("./lib/ajax-based"),s=e("./receiver/xhr"),a=e("./sender/xdr");o(r,i),r.enabled=function(e){return e.cookie_needed||e.nullOrigin?!1:a.enabled&&e.sameScheme},r.transportName="xdr-streaming",r.roundTrips=2,t.exports=r},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xdr":34,inherits:54}],41:[function(e,t,n){"use strict";function r(e){if(!u.enabled&&!a.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr",s,a)}var o=e("inherits"),i=e("./lib/ajax-based"),s=e("./receiver/xhr"),a=e("./sender/xhr-cors"),u=e("./sender/xhr-local");o(r,i),r.enabled=function(e){return e.nullOrigin?!1:u.enabled&&e.sameOrigin?!0:a.enabled},r.transportName="xhr-polling",r.roundTrips=2,t.exports=r},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xhr-cors":35,"./sender/xhr-local":37,inherits:54}],42:[function(e,t,r){(function(n){"use strict";function r(e){if(!u.enabled&&!a.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr_streaming",s,a)}var o=e("inherits"),i=e("./lib/ajax-based"),s=e("./receiver/xhr"),a=e("./sender/xhr-cors"),u=e("./sender/xhr-local"),c=e("../utils/browser");o(r,i),r.enabled=function(e){return e.nullOrigin?!1:c.isOpera()?!1:a.enabled},r.transportName="xhr-streaming",r.roundTrips=2,r.needBody=!!n.document,t.exports=r}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../utils/browser":44,"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xhr-cors":35,"./sender/xhr-local":37,inherits:54}],43:[function(e,t,r){(function(e){"use strict";e.crypto&&e.crypto.getRandomValues?t.exports.randomBytes=function(t){var n=new Uint8Array(t);return e.crypto.getRandomValues(n),n}:t.exports.randomBytes=function(e){for(var t=new Array(e),n=0;e>n;n++)t[n]=Math.floor(256*Math.random());return t}}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],44:[function(e,t,r){(function(e){"use strict";t.exports={isOpera:function(){return e.navigator&&/opera/i.test(e.navigator.userAgent)},isKonqueror:function(){return e.navigator&&/konqueror/i.test(e.navigator.userAgent)},hasDomain:function(){if(!e.document)return!0;try{return!!e.document.domain}catch(t){return!1}}}}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],45:[function(e,t,n){"use strict";var r,o=e("json3"),i=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,s=function(e){var t,n={},r=[];for(t=0;65536>t;t++)r.push(String.fromCharCode(t));return e.lastIndex=0,r.join("").replace(e,function(e){return n[e]="\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4),""}),e.lastIndex=0,n};t.exports={quote:function(e){var t=o.stringify(e);return i.lastIndex=0,i.test(t)?(r||(r=s(i)),t.replace(i,function(e){return r[e]})):t}}},{json3:55}],46:[function(e,t,r){(function(n){"use strict";var r=e("./random"),o={},i=!1;t.exports={attachEvent:function(e,t){"undefined"!=typeof n.addEventListener?n.addEventListener(e,t,!1):n.document&&n.attachEvent&&(n.document.attachEvent("on"+e,t),n.attachEvent("on"+e,t))},detachEvent:function(e,t){"undefined"!=typeof n.addEventListener?n.removeEventListener(e,t,!1):n.document&&n.detachEvent&&(n.document.detachEvent("on"+e,t),n.detachEvent("on"+e,t))},unloadAdd:function(e){var t=r.string(8);return o[t]=e,i&&setTimeout(this.triggerUnloadCallbacks,0),t},unloadDel:function(e){e in o&&delete o[e]},triggerUnloadCallbacks:function(){for(var e in o)o[e](),delete o[e]}};var s=function(){i||(i=!0,t.exports.triggerUnloadCallbacks())};t.exports.attachEvent("unload",s)}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./random":50}],47:[function(e,t,r){(function(n){"use strict";var r=e("./event"),o=e("json3"),i=e("./browser");t.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){t.exports.WPrefix in n||(n[t.exports.WPrefix]={})},postMessage:function(e,r){n.parent!==n&&n.parent.postMessage(o.stringify({windowId:t.exports.currentWindowId,type:e,data:r||""}),"*")},createIframe:function(e,t){var o,i,s=n.document.createElement("iframe"),a=function(){clearTimeout(o);try{s.onload=null}catch(e){}s.onerror=null},u=function(){s&&(a(),setTimeout(function(){s&&s.parentNode.removeChild(s),s=null},0),r.unloadDel(i))},c=function(e){s&&(u(),t(e))},l=function(e,t){try{s&&s.contentWindow&&setTimeout(function(){s.contentWindow.postMessage(e,t)},0)}catch(n){}};return s.src=e,s.style.display="none",s.style.position="absolute",s.onerror=function(){c("onerror")},s.onload=function(){clearTimeout(o),o=setTimeout(function(){c("onload timeout")},2e3)},n.document.body.appendChild(s),o=setTimeout(function(){c("timeout")},15e3),i=r.unloadAdd(u),{post:l,cleanup:u,loaded:a}},createHtmlfile:function(e,o){var i,s,a,u=["Active"].concat("Object").join("X"),c=new n[u]("htmlfile"),l=function(){clearTimeout(i),a.onerror=null},p=function(){c&&(l(),r.unloadDel(s),a.parentNode.removeChild(a),a=c=null,CollectGarbage())},f=function(e){c&&(p(),o(e))},d=function(e,t){try{a&&a.contentWindow&&setTimeout(function(){a.contentWindow.postMessage(e,t)},0)}catch(n){}};c.open(),c.write('<html><script>document.domain="'+n.document.domain+'";</script></html>'),c.close(),c.parentWindow[t.exports.WPrefix]=n[t.exports.WPrefix];var h=c.createElement("div");return c.body.appendChild(h),a=c.createElement("iframe"),h.appendChild(a),a.src=e,a.onerror=function(){f("onerror")},i=setTimeout(function(){f("timeout")},15e3),s=r.unloadAdd(p),{post:d,cleanup:p,loaded:l}}},t.exports.iframeEnabled=!1,n.document&&(t.exports.iframeEnabled=("function"==typeof n.postMessage||"object"==typeof n.postMessage)&&!i.isKonqueror())}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./browser":44,"./event":46,json3:55}],48:[function(e,t,r){(function(e){"use strict";var n={};["log","debug","warn"].forEach(function(t){var r=e.console&&e.console[t]&&e.console[t].apply;n[t]=r?function(){return e.console[t].apply(e.console,arguments)}:"log"===t?function(){}:n.log}),t.exports=n}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],49:[function(e,t,n){"use strict";t.exports={isObject:function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},extend:function(e){if(!this.isObject(e))return e;for(var t,n,r=1,o=arguments.length;o>r;r++){t=arguments[r];for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}}},{}],50:[function(e,t,n){"use strict";var r=e("crypto"),o="abcdefghijklmnopqrstuvwxyz012345";t.exports={string:function(e){for(var t=o.length,n=r.randomBytes(e),i=[],s=0;e>s;s++)i.push(o.substr(n[s]%t,1));return i.join("")},number:function(e){return Math.floor(Math.random()*e)},numberString:function(e){var t=(""+(e-1)).length,n=new Array(t+1).join("0");return(n+this.number(e)).slice(-t)}}},{crypto:43}],51:[function(e,t,n){"use strict";t.exports=function(e){return{filterToEnabled:function(t,n){var r={main:[],facade:[]};return t?"string"==typeof t&&(t=[t]):t=[],e.forEach(function(e){e&&("websocket"!==e.transportName||n.websocket!==!1)&&(t.length&&-1===t.indexOf(e.transportName)||e.enabled(n)&&(r.main.push(e),e.facadeTransport&&r.facade.push(e.facadeTransport)))}),r}}}},{}],52:[function(e,t,n){"use strict";var r=e("url-parse");t.exports={getOrigin:function(e){if(!e)return null;var t=new r(e);if("file:"===t.protocol)return null;var n=t.port;return n||(n="https:"===t.protocol?"443":"80"),t.protocol+"//"+t.hostname+":"+n},isOriginEqual:function(e,t){var n=this.getOrigin(e)===this.getOrigin(t);return n},isSchemeEqual:function(e,t){return e.split(":")[0]===t.split(":")[0]},addPath:function(e,t){var n=e.split("?");return n[0]+t+(n[1]?"?"+n[1]:"")},addQuery:function(e,t){return e+(-1===e.indexOf("?")?"?"+t:"&"+t)}}},{"url-parse":56}],53:[function(e,t,n){t.exports="1.0.0"},{}],54:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],55:[function(e,r,o){(function(e){(function(){function n(e,t){function r(e){if(r[e]!==v)return r[e];var n;if("bug-string-char-index"==e)n="a"!="a"[0];else if("json"==e)n=r("json-stringify")&&r("json-parse");else{var s,a='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var u=t.stringify,l="function"==typeof u&&b;if(l){(s=function(){return 1}).toJSON=s;try{l="0"===u(0)&&"0"===u(new o)&&'""'==u(new i)&&u(g)===v&&u(v)===v&&u()===v&&"1"===u(s)&&"[1]"==u([s])&&"[null]"==u([v])&&"null"==u(null)&&"[null,null,null]"==u([v,g,null])&&u({a:[s,!0,!1,null,"\x00\b\n\f\r	"]})==a&&"1"===u(null,s)&&"[\n 1,\n 2\n]"==u([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==u(new c(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==u(new c(864e13))&&'"-000001-01-01T00:00:00.000Z"'==u(new c(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==u(new c(-1))}catch(p){l=!1}}n=l}if("json-parse"==e){var f=t.parse;if("function"==typeof f)try{if(0===f("0")&&!f(!1)){s=f(a);var d=5==s.a.length&&1===s.a[0];if(d){try{d=!f('"	"')}catch(p){}if(d)try{d=1!==f("01")}catch(p){}if(d)try{d=1!==f("1.")}catch(p){}}}}catch(p){d=!1}n=d}}return r[e]=!!n}e||(e=u.Object()),t||(t=u.Object());var o=e.Number||u.Number,i=e.String||u.String,a=e.Object||u.Object,c=e.Date||u.Date,l=e.SyntaxError||u.SyntaxError,p=e.TypeError||u.TypeError,f=e.Math||u.Math,d=e.JSON||u.JSON;"object"==typeof d&&d&&(t.stringify=d.stringify,t.parse=d.parse);var h,m,v,y=a.prototype,g=y.toString,b=new c(-0xc782b5b800cec);try{b=-109252==b.getUTCFullYear()&&0===b.getUTCMonth()&&1===b.getUTCDate()&&10==b.getUTCHours()&&37==b.getUTCMinutes()&&6==b.getUTCSeconds()&&708==b.getUTCMilliseconds()}catch(w){}if(!r("json")){var x="[object Function]",_="[object Date]",k="[object Number]",E="[object String]",S="[object Array]",L="[object Boolean]",j=r("bug-string-char-index");if(!b)var T=f.floor,O=[0,31,59,90,120,151,181,212,243,273,304,334],C=function(e,t){return O[t]+365*(e-1970)+T((e-1969+(t=+(t>1)))/4)-T((e-1901+t)/100)+T((e-1601+t)/400)};if((h=y.hasOwnProperty)||(h=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=g?h=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,h=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,h.call(this,e)}),m=function(e,t){var n,r,o,i=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,r=new n;for(o in r)h.call(r,o)&&i++;return n=r=null,i?m=2==i?function(e,t){var n,r={},o=g.call(e)==x;for(n in e)o&&"prototype"==n||h.call(r,n)||!(r[n]=1)||!h.call(e,n)||t(n)}:function(e,t){var n,r,o=g.call(e)==x;for(n in e)o&&"prototype"==n||!h.call(e,n)||(r="constructor"===n)||t(n);(r||h.call(e,n="constructor"))&&t(n)}:(r=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],m=function(e,t){var n,o,i=g.call(e)==x,a=!i&&"function"!=typeof e.constructor&&s[typeof e.hasOwnProperty]&&e.hasOwnProperty||h;for(n in e)i&&"prototype"==n||!a.call(e,n)||t(n);for(o=r.length;n=r[--o];a.call(e,n)&&t(n));}),m(e,t)},!r("json-stringify")){var A={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},N="000000",I=function(e,t){return(N+(t||0)).slice(-e)},P="\\u00",q=function(e){for(var t='"',n=0,r=e.length,o=!j||r>10,i=o&&(j?e.split(""):e);r>n;n++){var s=e.charCodeAt(n);switch(s){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=A[s];break;default:if(32>s){t+=P+I(2,s.toString(16));break}t+=o?i[n]:e.charAt(n)}}return t+'"'},F=function(e,t,n,r,o,i,s){var a,u,c,l,f,d,y,b,w,x,j,O,A,N,P,B;try{a=t[e]}catch(M){}if("object"==typeof a&&a)if(u=g.call(a),u!=_||h.call(a,"toJSON"))"function"==typeof a.toJSON&&(u!=k&&u!=E&&u!=S||h.call(a,"toJSON"))&&(a=a.toJSON(e));else if(a>-1/0&&1/0>a){if(C){for(f=T(a/864e5),c=T(f/365.2425)+1970-1;C(c+1,0)<=f;c++);for(l=T((f-C(c,0))/30.42);C(c,l+1)<=f;l++);f=1+f-C(c,l),d=(a%864e5+864e5)%864e5,y=T(d/36e5)%24,b=T(d/6e4)%60,w=T(d/1e3)%60,x=d%1e3}else c=a.getUTCFullYear(),l=a.getUTCMonth(),f=a.getUTCDate(),y=a.getUTCHours(),b=a.getUTCMinutes(),w=a.getUTCSeconds(),x=a.getUTCMilliseconds();a=(0>=c||c>=1e4?(0>c?"-":"+")+I(6,0>c?-c:c):I(4,c))+"-"+I(2,l+1)+"-"+I(2,f)+"T"+I(2,y)+":"+I(2,b)+":"+I(2,w)+"."+I(3,x)+"Z"}else a=null;if(n&&(a=n.call(t,e,a)),null===a)return"null";if(u=g.call(a),u==L)return""+a;if(u==k)return a>-1/0&&1/0>a?""+a:"null";if(u==E)return q(""+a);if("object"==typeof a){for(N=s.length;N--;)if(s[N]===a)throw p();if(s.push(a),j=[],P=i,i+=o,u==S){for(A=0,N=a.length;N>A;A++)O=F(A,a,n,r,o,i,s),j.push(O===v?"null":O);B=j.length?o?"[\n"+i+j.join(",\n"+i)+"\n"+P+"]":"["+j.join(",")+"]":"[]"}else m(r||a,function(e){var t=F(e,a,n,r,o,i,s);t!==v&&j.push(q(e)+":"+(o?" ":"")+t)}),B=j.length?o?"{\n"+i+j.join(",\n"+i)+"\n"+P+"}":"{"+j.join(",")+"}":"{}";return s.pop(),B}};t.stringify=function(e,t,n){var r,o,i,a;if(s[typeof t]&&t)if((a=g.call(t))==x)o=t;else if(a==S){i={};for(var u,c=0,l=t.length;l>c;u=t[c++],a=g.call(u),(a==E||a==k)&&(i[u]=1));}if(n)if((a=g.call(n))==k){if((n-=n%1)>0)for(r="",n>10&&(n=10);r.length<n;r+=" ");}else a==E&&(r=n.length<=10?n:n.slice(0,10));return F("",(u={},u[""]=e,u),o,i,r,"",[])}}if(!r("json-parse")){var B,M,R=i.fromCharCode,D={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},U=function(){throw B=M=null,l()},V=function(){for(var e,t,n,r,o,i=M,s=i.length;s>B;)switch(o=i.charCodeAt(B)){case 9:case 10:case 13:case 32:B++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=j?i.charAt(B):i[B],B++,e;case 34:for(e="@",B++;s>B;)if(o=i.charCodeAt(B),32>o)U();else if(92==o)switch(o=i.charCodeAt(++B)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=D[o],B++;break;case 117:for(t=++B,n=B+4;n>B;B++)o=i.charCodeAt(B),o>=48&&57>=o||o>=97&&102>=o||o>=65&&70>=o||U();e+=R("0x"+i.slice(t,B));break;default:U()}else{if(34==o)break;for(o=i.charCodeAt(B),t=B;o>=32&&92!=o&&34!=o;)o=i.charCodeAt(++B);e+=i.slice(t,B)}if(34==i.charCodeAt(B))return B++,e;U();default:if(t=B,45==o&&(r=!0,o=i.charCodeAt(++B)),o>=48&&57>=o){for(48==o&&(o=i.charCodeAt(B+1),o>=48&&57>=o)&&U(),r=!1;s>B&&(o=i.charCodeAt(B),o>=48&&57>=o);B++);if(46==i.charCodeAt(B)){for(n=++B;s>n&&(o=i.charCodeAt(n),o>=48&&57>=o);n++);n==B&&U(),B=n}if(o=i.charCodeAt(B),101==o||69==o){for(o=i.charCodeAt(++B),(43==o||45==o)&&B++,n=B;s>n&&(o=i.charCodeAt(n),o>=48&&57>=o);n++);n==B&&U(),B=n}return+i.slice(t,B)}if(r&&U(),"true"==i.slice(B,B+4))return B+=4,!0;if("false"==i.slice(B,B+5))return B+=5,!1;if("null"==i.slice(B,B+4))return B+=4,null;U()}return"$"},W=function(e){var t,n;if("$"==e&&U(),"string"==typeof e){if("@"==(j?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];e=V(),"]"!=e;n||(n=!0))n&&(","==e?(e=V(),"]"==e&&U()):U()),","==e&&U(),t.push(W(e));return t}if("{"==e){for(t={};e=V(),"}"!=e;n||(n=!0))n&&(","==e?(e=V(),"}"==e&&U()):U()),(","==e||"string"!=typeof e||"@"!=(j?e.charAt(0):e[0])||":"!=V())&&U(),t[e.slice(1)]=W(V());return t}U()}return e},J=function(e,t,n){var r=H(e,t,n);r===v?delete e[t]:e[t]=r},H=function(e,t,n){var r,o=e[t];if("object"==typeof o&&o)if(g.call(o)==S)for(r=o.length;r--;)J(o,r,n);else m(o,function(e){J(o,e,n)});return n.call(e,t,o)};t.parse=function(e,t){var n,r;return B=0,M=""+e,n=W(V()),"$"!=V()&&U(),B=M=null,t&&g.call(t)==x?H((r={},r[""]=n,r),"",t):n}}}return t.runInContext=n,t}var i="function"==typeof t&&t.amd,s={"function":!0,object:!0},a=s[typeof o]&&o&&!o.nodeType&&o,u=s[typeof window]&&window||this,c=a&&s[typeof r]&&r&&!r.nodeType&&"object"==typeof e&&e;if(!c||c.global!==c&&c.window!==c&&c.self!==c||(u=c),a&&!i)n(u,a);else{var l=u.JSON,p=u.JSON3,f=!1,d=n(u,u.JSON3={noConflict:function(){return f||(f=!0,u.JSON=l,u.JSON3=p,l=p=null),d}});u.JSON={parse:d.parse,stringify:d.stringify}}i&&t(function(){return d})}).call(this)}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],56:[function(e,t,n){"use strict";function r(e,t,n){if(!(this instanceof r))return new r(e,t,n);var c,l,p,f,d=a.test(e),h=typeof t,m=this,v=0;for("object"!==h&&"string"!==h&&(n=t,t=null),n&&"function"!=typeof n&&(n=s.parse),t=i(t);v<u.length;v++)l=u[v],c=l[0],f=l[1],c!==c?m[f]=e:"string"==typeof c?~(p=e.indexOf(c))&&("number"==typeof l[2]?(m[f]=e.slice(0,p),e=e.slice(p+l[2])):(m[f]=e.slice(p),e=e.slice(0,p))):(p=c.exec(e))&&(m[f]=p[1],e=e.slice(0,e.length-p[0].length)),m[f]=m[f]||(l[3]||"port"===f&&d?t[f]||"":""),l[4]&&(m[f]=m[f].toLowerCase());n&&(m.query=n(m.query)),o(m.port,m.protocol)||(m.host=m.hostname,m.port=""),m.username=m.password="",m.auth&&(l=m.auth.split(":"),m.username=l[0]||"",m.password=l[1]||""),m.href=m.toString()}var o=e("requires-port"),i=e("./lolcation"),s=e("querystringify"),a=/^\/(?!\/)/,u=[["#","hash"],["?","query"],["//","protocol",2,1,1],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/\:(\d+)$/,"port"],[NaN,"hostname",void 0,1,1]];r.prototype.set=function(e,t,n){var r=this;return"query"===e?("string"==typeof t&&(t=(n||s.parse)(t)),r[e]=t):"port"===e?(r[e]=t,o(t,r.protocol)?t&&(r.host=r.hostname+":"+t):(r.host=r.hostname,r[e]="")):"hostname"===e?(r[e]=t,r.port&&(t+=":"+r.port),r.host=t):"host"===e?(r[e]=t,/\:\d+/.test(t)&&(t=t.split(":"),r.hostname=t[0],r.port=t[1])):r[e]=t,r.href=r.toString(),r},r.prototype.toString=function(e){e&&"function"==typeof e||(e=s.stringify);var t,n=this,r=n.protocol+"//";return n.username&&(r+=n.username,n.password&&(r+=":"+n.password),r+="@"),r+=n.hostname,n.port&&(r+=":"+n.port),r+=n.pathname,n.query&&(t="object"==typeof n.query?e(n.query):n.query,r+=("?"===t.charAt(0)?"":"?")+t),n.hash&&(r+=n.hash),r},r.qs=s,r.location=i,t.exports=r},{"./lolcation":57,querystringify:58,"requires-port":59}],57:[function(e,t,r){(function(n){"use strict";var r,o={hash:1,query:1};t.exports=function(t){t=t||n.location||{},r=r||e("./");var i,s={},a=typeof t;if("blob:"===t.protocol)s=new r(unescape(t.pathname),{});else if("string"===a){s=new r(t,{});for(i in o)delete s[i]}else if("object"===a)for(i in t)i in o||(s[i]=t[i]);return s}}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./":56}],58:[function(e,t,n){"use strict";function r(e){for(var t,n=/([^=?&]+)=([^&]*)/g,r={};t=n.exec(e);r[decodeURIComponent(t[1])]=decodeURIComponent(t[2]));return r}function o(e,t){t=t||"";var n=[];"string"!=typeof t&&(t="?");for(var r in e)i.call(e,r)&&n.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return n.length?t+n.join("&"):""}var i=Object.prototype.hasOwnProperty;
n.stringify=o,n.parse=r},{}],59:[function(e,t,n){"use strict";t.exports=function(e,t){if(t=t.split(":")[0],e=+e,!e)return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 22!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},{}]},{},[1])(1)})}(this.Primus)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],14:[function(e,t,n){t.exports={ringCount:2,cjsPerRing:4,maxScore:3,jpPwd:"tkd",matchConfig:{timeStep:15,defaults:{roundTime:{label:"Round time",type:"time",value:120},breakTime:{label:"Break time",type:"time",value:60},injuryTime:{label:"Injury time",type:"time",value:120},twoRounds:{label:"Number of rounds",type:"boolean",value:!0}}},timer:{saveInterval:2,toggleDelay:500}}},{}],15:[function(e,t,n){!function(){var e={},t=null,r=!0,o=!1;try{"undefined"!=typeof AudioContext?t=new AudioContext:"undefined"!=typeof webkitAudioContext?t=new webkitAudioContext:r=!1}catch(i){r=!1}if(!r)if("undefined"!=typeof Audio)try{new Audio}catch(i){o=!0}else o=!0;if(r){var s="undefined"==typeof t.createGain?t.createGainNode():t.createGain();s.gain.value=1,s.connect(t.destination)}var a=function(e){this._volume=1,this._muted=!1,this.usingWebAudio=r,this.ctx=t,this.noAudio=o,this._howls=[],this._codecs=e,this.iOSAutoEnable=!0};a.prototype={volume:function(e){var t=this;if(e=parseFloat(e),e>=0&&1>=e){t._volume=e,r&&(s.gain.value=e);for(var n in t._howls)if(t._howls.hasOwnProperty(n)&&t._howls[n]._webAudio===!1)for(var o=0;o<t._howls[n]._audioNode.length;o++)t._howls[n]._audioNode[o].volume=t._howls[n]._volume*t._volume;return t}return r?s.gain.value:t._volume},mute:function(){return this._setMuted(!0),this},unmute:function(){return this._setMuted(!1),this},_setMuted:function(e){var t=this;t._muted=e,r&&(s.gain.value=e?0:t._volume);for(var n in t._howls)if(t._howls.hasOwnProperty(n)&&t._howls[n]._webAudio===!1)for(var o=0;o<t._howls[n]._audioNode.length;o++)t._howls[n]._audioNode[o].muted=e},codecs:function(e){return this._codecs[e]},_enableiOSAudio:function(){var e=this;if(!t||!e._iOSEnabled&&/iPhone|iPad|iPod/i.test(navigator.userAgent)){e._iOSEnabled=!1;var n=function(){var r=t.createBuffer(1,1,22050),o=t.createBufferSource();o.buffer=r,o.connect(t.destination),"undefined"==typeof o.start?o.noteOn(0):o.start(0),setTimeout(function(){(o.playbackState===o.PLAYING_STATE||o.playbackState===o.FINISHED_STATE)&&(e._iOSEnabled=!0,e.iOSAutoEnable=!1,window.removeEventListener("touchstart",n,!1))},0)};return window.addEventListener("touchstart",n,!1),e}}};var u=null,c={};o||(u=new Audio,c={mp3:!!u.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!u.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!u.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!u.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!u.canPlayType("audio/aac;").replace(/^no$/,""),m4a:!!(u.canPlayType("audio/x-m4a;")||u.canPlayType("audio/m4a;")||u.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(u.canPlayType("audio/x-mp4;")||u.canPlayType("audio/mp4;")||u.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!u.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")});var l=new a(c),p=function(e){var n=this;n._autoplay=e.autoplay||!1,n._buffer=e.buffer||!1,n._duration=e.duration||0,n._format=e.format||null,n._loop=e.loop||!1,n._loaded=!1,n._sprite=e.sprite||{},n._src=e.src||"",n._pos3d=e.pos3d||[0,0,-.5],n._volume=void 0!==e.volume?e.volume:1,n._urls=e.urls||[],n._rate=e.rate||1,n._model=e.model||null,n._onload=[e.onload||function(){}],n._onloaderror=[e.onloaderror||function(){}],n._onend=[e.onend||function(){}],n._onpause=[e.onpause||function(){}],n._onplay=[e.onplay||function(){}],n._onendTimer=[],n._webAudio=r&&!n._buffer,n._audioNode=[],n._webAudio&&n._setupAudioNode(),"undefined"!=typeof t&&t&&l.iOSAutoEnable&&l._enableiOSAudio(),l._howls.push(n),n.load()};if(p.prototype={load:function(){var e=this,t=null;if(o)return void e.on("loaderror");for(var n=0;n<e._urls.length;n++){var r,i;if(e._format)r=e._format;else{if(i=e._urls[n],r=/^data:audio\/([^;,]+);/i.exec(i),r||(r=/\.([^.]+)$/.exec(i.split("?",1)[0])),!r)return void e.on("loaderror");r=r[1].toLowerCase()}if(c[r]){t=e._urls[n];break}}if(!t)return void e.on("loaderror");if(e._src=t,e._webAudio)f(e,t);else{var s=new Audio;s.addEventListener("error",function(){s.error&&4===s.error.code&&(a.noAudio=!0),e.on("loaderror",{type:s.error?s.error.code:0})},!1),e._audioNode.push(s),s.src=t,s._pos=0,s.preload="auto",s.volume=l._muted?0:e._volume*l.volume();var u=function(){e._duration=Math.ceil(10*s.duration)/10,0===Object.getOwnPropertyNames(e._sprite).length&&(e._sprite={_default:[0,1e3*e._duration]}),e._loaded||(e._loaded=!0,e.on("load")),e._autoplay&&e.play(),s.removeEventListener("canplaythrough",u,!1)};s.addEventListener("canplaythrough",u,!1),s.load()}return e},urls:function(e){var t=this;return e?(t.stop(),t._urls="string"==typeof e?[e]:e,t._loaded=!1,t.load(),t):t._urls},play:function(e,n){var r=this;return"function"==typeof e&&(n=e),e&&"function"!=typeof e||(e="_default"),r._loaded?r._sprite[e]?(r._inactiveNode(function(o){o._sprite=e;var i=o._pos>0?o._pos:r._sprite[e][0]/1e3,s=0;r._webAudio?(s=r._sprite[e][1]/1e3-o._pos,o._pos>0&&(i=r._sprite[e][0]/1e3+i)):s=r._sprite[e][1]/1e3-(i-r._sprite[e][0]/1e3);var a,u=!(!r._loop&&!r._sprite[e][2]),c="string"==typeof n?n:Math.round(Date.now()*Math.random())+"";if(function(){var t={id:c,sprite:e,loop:u};a=setTimeout(function(){!r._webAudio&&u&&r.stop(t.id).play(e,t.id),r._webAudio&&!u&&(r._nodeById(t.id).paused=!0,r._nodeById(t.id)._pos=0,r._clearEndTimer(t.id)),r._webAudio||u||r.stop(t.id),r.on("end",c)},1e3*s),r._onendTimer.push({timer:a,id:t.id})}(),r._webAudio){var p=r._sprite[e][0]/1e3,f=r._sprite[e][1]/1e3;o.id=c,o.paused=!1,m(r,[u,p,f],c),r._playStart=t.currentTime,o.gain.value=r._volume,"undefined"==typeof o.bufferSource.start?u?o.bufferSource.noteGrainOn(0,i,86400):o.bufferSource.noteGrainOn(0,i,s):u?o.bufferSource.start(0,i,86400):o.bufferSource.start(0,i,s)}else{if(4!==o.readyState&&(o.readyState||!navigator.isCocoonJS))return r._clearEndTimer(c),function(){var t=r,i=e,s=n,a=o,u=function(){t.play(i,s),a.removeEventListener("canplaythrough",u,!1)};a.addEventListener("canplaythrough",u,!1)}(),r;o.readyState=4,o.id=c,o.currentTime=i,o.muted=l._muted||o.muted,o.volume=r._volume*l.volume(),setTimeout(function(){o.play()},0)}return r.on("play"),"function"==typeof n&&n(c),r}),r):("function"==typeof n&&n(),r):(r.on("load",function(){r.play(e,n)}),r)},pause:function(e){var t=this;if(!t._loaded)return t.on("play",function(){t.pause(e)}),t;t._clearEndTimer(e);var n=e?t._nodeById(e):t._activeNode();if(n)if(n._pos=t.pos(null,e),t._webAudio){if(!n.bufferSource||n.paused)return t;n.paused=!0,"undefined"==typeof n.bufferSource.stop?n.bufferSource.noteOff(0):n.bufferSource.stop(0)}else n.pause();return t.on("pause"),t},stop:function(e){var t=this;if(!t._loaded)return t.on("play",function(){t.stop(e)}),t;t._clearEndTimer(e);var n=e?t._nodeById(e):t._activeNode();if(n)if(n._pos=0,t._webAudio){if(!n.bufferSource||n.paused)return t;n.paused=!0,"undefined"==typeof n.bufferSource.stop?n.bufferSource.noteOff(0):n.bufferSource.stop(0)}else isNaN(n.duration)||(n.pause(),n.currentTime=0);return t},mute:function(e){var t=this;if(!t._loaded)return t.on("play",function(){t.mute(e)}),t;var n=e?t._nodeById(e):t._activeNode();return n&&(t._webAudio?n.gain.value=0:n.muted=!0),t},unmute:function(e){var t=this;if(!t._loaded)return t.on("play",function(){t.unmute(e)}),t;var n=e?t._nodeById(e):t._activeNode();return n&&(t._webAudio?n.gain.value=t._volume:n.muted=!1),t},volume:function(e,t){var n=this;if(e=parseFloat(e),e>=0&&1>=e){if(n._volume=e,!n._loaded)return n.on("play",function(){n.volume(e,t)}),n;var r=t?n._nodeById(t):n._activeNode();return r&&(n._webAudio?r.gain.value=e:r.volume=e*l.volume()),n}return n._volume},loop:function(e){var t=this;return"boolean"==typeof e?(t._loop=e,t):t._loop},sprite:function(e){var t=this;return"object"==typeof e?(t._sprite=e,t):t._sprite},pos:function(e,n){var r=this;if(!r._loaded)return r.on("load",function(){r.pos(e)}),"number"==typeof e?r:r._pos||0;e=parseFloat(e);var o=n?r._nodeById(n):r._activeNode();if(o)return e>=0?(r.pause(n),o._pos=e,r.play(o._sprite,n),r):r._webAudio?o._pos+(t.currentTime-r._playStart):o.currentTime;if(e>=0)return r;for(var i=0;i<r._audioNode.length;i++)if(r._audioNode[i].paused&&4===r._audioNode[i].readyState)return r._webAudio?r._audioNode[i]._pos:r._audioNode[i].currentTime},pos3d:function(e,t,n,r){var o=this;if(t="undefined"!=typeof t&&t?t:0,n="undefined"!=typeof n&&n?n:-.5,!o._loaded)return o.on("play",function(){o.pos3d(e,t,n,r)}),o;if(!(e>=0||0>e))return o._pos3d;if(o._webAudio){var i=r?o._nodeById(r):o._activeNode();i&&(o._pos3d=[e,t,n],i.panner.setPosition(e,t,n),i.panner.panningModel=o._model||"HRTF")}return o},fade:function(e,t,n,r,o){var i=this,s=Math.abs(e-t),a=e>t?"down":"up",u=s/.01,c=n/u;if(!i._loaded)return i.on("load",function(){i.fade(e,t,n,r,o)}),i;i.volume(e,o);for(var l=1;u>=l;l++)!function(){var e=i._volume+("up"===a?.01:-.01)*l,n=Math.round(1e3*e)/1e3,s=t;setTimeout(function(){i.volume(n,o),n===s&&r&&r()},c*l)}()},fadeIn:function(e,t,n){return this.volume(0).play().fade(0,e,t,n)},fadeOut:function(e,t,n,r){var o=this;return o.fade(o._volume,e,t,function(){n&&n(),o.pause(r),o.on("end")},r)},_nodeById:function(e){for(var t=this,n=t._audioNode[0],r=0;r<t._audioNode.length;r++)if(t._audioNode[r].id===e){n=t._audioNode[r];break}return n},_activeNode:function(){for(var e=this,t=null,n=0;n<e._audioNode.length;n++)if(!e._audioNode[n].paused){t=e._audioNode[n];break}return e._drainPool(),t},_inactiveNode:function(e){for(var t=this,n=null,r=0;r<t._audioNode.length;r++)if(t._audioNode[r].paused&&4===t._audioNode[r].readyState){e(t._audioNode[r]),n=!0;break}if(t._drainPool(),!n){var o;if(t._webAudio)o=t._setupAudioNode(),e(o);else{t.load(),o=t._audioNode[t._audioNode.length-1];var i=navigator.isCocoonJS?"canplaythrough":"loadedmetadata",s=function(){o.removeEventListener(i,s,!1),e(o)};o.addEventListener(i,s,!1)}}},_drainPool:function(){var e,t=this,n=0;for(e=0;e<t._audioNode.length;e++)t._audioNode[e].paused&&n++;for(e=t._audioNode.length-1;e>=0&&!(5>=n);e--)t._audioNode[e].paused&&(t._webAudio&&t._audioNode[e].disconnect(0),n--,t._audioNode.splice(e,1))},_clearEndTimer:function(e){for(var t=this,n=0,r=0;r<t._onendTimer.length;r++)if(t._onendTimer[r].id===e){n=r;break}var o=t._onendTimer[n];o&&(clearTimeout(o.timer),t._onendTimer.splice(n,1))},_setupAudioNode:function(){var e=this,n=e._audioNode,r=e._audioNode.length;return n[r]="undefined"==typeof t.createGain?t.createGainNode():t.createGain(),n[r].gain.value=e._volume,n[r].paused=!0,n[r]._pos=0,n[r].readyState=4,n[r].connect(s),n[r].panner=t.createPanner(),n[r].panner.panningModel=e._model||"equalpower",n[r].panner.setPosition(e._pos3d[0],e._pos3d[1],e._pos3d[2]),n[r].panner.connect(n[r]),n[r]},on:function(e,t){var n=this,r=n["_on"+e];if("function"==typeof t)r.push(t);else for(var o=0;o<r.length;o++)t?r[o].call(n,t):r[o].call(n);return n},off:function(e,t){var n=this,r=n["_on"+e],o=t?t.toString():null;if(o){for(var i=0;i<r.length;i++)if(o===r[i].toString()){r.splice(i,1);break}}else n["_on"+e]=[];return n},unload:function(){for(var t=this,n=t._audioNode,r=0;r<t._audioNode.length;r++)n[r].paused||(t.stop(n[r].id),t.on("end",n[r].id)),t._webAudio?n[r].disconnect(0):n[r].src="";for(r=0;r<t._onendTimer.length;r++)clearTimeout(t._onendTimer[r].timer);var o=l._howls.indexOf(t);null!==o&&o>=0&&l._howls.splice(o,1),delete e[t._src],t=null}},r)var f=function(t,n){if(n in e)return t._duration=e[n].duration,void h(t);if(/^data:[^;]+;base64,/.test(n)){for(var r=atob(n.split(",")[1]),o=new Uint8Array(r.length),i=0;i<r.length;++i)o[i]=r.charCodeAt(i);d(o.buffer,t,n)}else{var s=new XMLHttpRequest;s.open("GET",n,!0),s.responseType="arraybuffer",s.onload=function(){d(s.response,t,n)},s.onerror=function(){t._webAudio&&(t._buffer=!0,t._webAudio=!1,t._audioNode=[],delete t._gainNode,delete e[n],t.load())};try{s.send()}catch(a){s.onerror()}}},d=function(n,r,o){t.decodeAudioData(n,function(t){t&&(e[o]=t,h(r,t))},function(e){r.on("loaderror")})},h=function(e,t){e._duration=t?t.duration:e._duration,0===Object.getOwnPropertyNames(e._sprite).length&&(e._sprite={_default:[0,1e3*e._duration]}),e._loaded||(e._loaded=!0,e.on("load")),e._autoplay&&e.play()},m=function(n,r,o){var i=n._nodeById(o);i.bufferSource=t.createBufferSource(),i.bufferSource.buffer=e[n._src],i.bufferSource.connect(i.panner),i.bufferSource.loop=r[0],r[0]&&(i.bufferSource.loopStart=r[1],i.bufferSource.loopEnd=r[1]+r[2]),i.bufferSource.playbackRate.value=n._rate};"function"==typeof define&&define.amd&&define(function(){return{Howler:l,Howl:p}}),"undefined"!=typeof n&&(n.Howler=l,n.Howl=p),"undefined"!=typeof window&&(window.Howler=l,window.Howl=p)}()},{}],16:[function(e,t,n){!function(){var e={};!function(){"use strict";function t(e,n,r){var o=function(){};o.prototype=e.prototype;var i=new o,s=/xyz/.test(function(){xyz})?/\bparent\b/:/.*/;r=r||{};for(var a in r){var u=r[a],c=i[a];"function"==typeof c&&"function"==typeof u&&s.test(u)?i[a]=function(e,t){return function(){var n=this.parent;this.parent=t;var r=e.apply(this,arguments);return this.parent=n,r}}(u,c):i[a]=u}i.typename=n;var l=function(){i.init&&i.init.apply(this,arguments)};return l.prototype=i,l.prototype.constructor=l,l.extend=function(e,n){return"object"==typeof e&&(n=e,e="anonymous"),t(l,e,n)},l}e.object=t(Object,"Object",{})}(),function(){"use strict";var t=Array.prototype,n=Object.prototype,r={"&":"&amp;",'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;"},o=/[&"'<>]/g,i=function(e){return r[e]},s=e.lib={};s.withPrettyErrors=function(e,t,n){try{return n()}catch(r){if(r.Update||(r=new s.TemplateError(r)),r.Update(e),!t){var o=r;r=new Error(o.message),r.name=o.name}throw r}},s.TemplateError=function(e,t,n){var r=this;return e instanceof Error?(r=e,e=e.name+": "+e.message):Error.captureStackTrace&&Error.captureStackTrace(r),r.name="Template render error",r.message=e,r.lineno=t,r.colno=n,r.firstUpdate=!0,r.Update=function(e){var t="("+(e||"unknown path")+")";return this.firstUpdate&&(this.lineno&&this.colno?t+=" [Line "+this.lineno+", Column "+this.colno+"]":this.lineno&&(t+=" [Line "+this.lineno+"]")),t+="\n ",this.firstUpdate&&(t+=" "),this.message=t+(this.message||""),this.firstUpdate=!1,this},r},s.TemplateError.prototype=Error.prototype,s.escape=function(e){return e.replace(o,i)},s.isFunction=function(e){return"[object Function]"===n.toString.call(e)},s.isArray=Array.isArray||function(e){return"[object Array]"===n.toString.call(e)},s.isString=function(e){return"[object String]"===n.toString.call(e)},s.isObject=function(e){return"[object Object]"===n.toString.call(e)},s.groupBy=function(e,t){for(var n={},r=s.isFunction(t)?t:function(e){return e[t]},o=0;o<e.length;o++){var i=e[o],a=r(i,o);(n[a]||(n[a]=[])).push(i)}return n},s.toArray=function(e){return Array.prototype.slice.call(e)},s.without=function(e){var t=[];if(!e)return t;for(var n=-1,r=e.length,o=s.toArray(arguments).slice(1);++n<r;)-1===s.indexOf(o,e[n])&&t.push(e[n]);return t},s.extend=function(e,t){for(var n in t)e[n]=t[n];return e},s.repeat=function(e,t){for(var n="",r=0;t>r;r++)n+=e;return n},s.each=function(e,n,r){if(null!=e)if(t.each&&e.each===t.each)e.forEach(n,r);else if(e.length===+e.length)for(var o=0,i=e.length;i>o;o++)n.call(r,e[o],o,e)},s.map=function(e,n){var r=[];if(null==e)return r;if(t.map&&e.map===t.map)return e.map(n);for(var o=0;o<e.length;o++)r[r.length]=n(e[o],o);return e.length===+e.length&&(r.length=e.length),r},s.asyncIter=function(e,t,n){function r(){o++,o<e.length?t(e[o],o,r,n):n()}var o=-1;r()},s.asyncFor=function(e,t,n){function r(){a++;var s=o[a];i>a?t(s,e[s],a,i,r):n()}var o=s.keys(e),i=o.length,a=-1;r()},s.indexOf=Array.prototype.indexOf?function(e,t,n){return Array.prototype.indexOf.call(e,t,n)}:function(e,t,n){var r=this.length>>>0;for(n=+n||0,Math.abs(n)===1/0&&(n=0),0>n&&(n+=r,0>n&&(n=0));r>n;n++)if(e[n]===t)return n;return-1},Array.prototype.map||(Array.prototype.map=function(){throw new Error("map is unimplemented for this js engine")}),s.keys=function(e){if(Object.prototype.keys)return e.keys();var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}}(),function(){"use strict";function t(e,t,n){return function(){var i,s=o(arguments),a=r(arguments);if(s>e.length){i=Array.prototype.slice.call(arguments,0,e.length);for(var u=Array.prototype.slice.call(arguments,i.length,s),c=0;c<u.length;c++)c<t.length&&(a[t[c]]=u[c]);i.push(a)}else if(s<e.length){i=Array.prototype.slice.call(arguments,0,s);for(var c=s;c<e.length;c++){var l=e[c];i.push(a[l]),delete a[l]}i.push(a)}else i=arguments;return n.apply(this,i)}}function n(e){return e.__keywords=!0,e}function r(e){var t=e.length;if(t){var n=e[t-1];if(n&&n.hasOwnProperty("__keywords"))return n}return{}}function o(e){var t=e.length;if(0===t)return 0;var n=e[t-1];return n&&n.hasOwnProperty("__keywords")?t-1:t}function i(e){return"string"!=typeof e?e:void(this.val=e)}function s(e,t){return e instanceof i?new i(t):t.toString()}function a(e){var t=typeof e;return"string"===t?new i(e):"function"!==t?e:function(){var t=e.apply(this,arguments);return"string"==typeof t?new i(t):t}}function u(e,t){return e=void 0!==e&&null!==e?e:"",t&&"string"==typeof e&&(e=m.escape(e)),e}function c(e,t){return e=e||{},"function"==typeof e[t]?function(){return e[t].apply(e,arguments)}:e[t]}function l(e,t,n){if(!e)throw new Error("Unable to call `"+t+"`, which is undefined or falsey");if("function"!=typeof e)throw new Error("Unable to call `"+t+"`, which is not a function");return e.apply(this,n)}function p(e,t,n){var r=t.lookup(n);return void 0!==r&&null!==r?r:e.lookup(n)}function f(e,t,n){return e.lineno?e:new m.TemplateError(e,t,n)}function d(e,t,n,r){if(m.isArray(e)){var o=e.length;m.asyncIter(e,function(e,r,i){switch(t){case 1:n(e,r,o,i);break;case 2:n(e[0],e[1],r,o,i);break;case 3:n(e[0],e[1],e[2],r,o,i);break;default:e.push(r,i),n.apply(this,e)}},r)}else m.asyncFor(e,function(e,t,r,o,i){n(e,t,r,o,i)},r)}function h(e,t,n,r){function o(e,t){a++,s[e]=t,a===i&&r(null,s.join(""))}var i,s,a=0;if(m.isArray(e))if(i=e.length,s=new Array(i),0===i)r(null,"");else for(var u=0;u<e.length;u++){var c=e[u];switch(t){case 1:n(c,u,i,o);break;case 2:n(c[0],c[1],u,i,o);break;case 3:n(c[0],c[1],c[2],u,i,o);break;default:c.push(u,o),n.apply(this,c)}}else{var l=m.keys(e);if(i=l.length,s=new Array(i),0===i)r(null,"");else for(var u=0;u<l.length;u++){var p=l[u];n(p,e[p],u,i,o)}}}var m=e.lib,v=e.object,y=v.extend({init:function(e){this.variables={},this.parent=e},set:function(e,t,n){var r=e.split("."),o=this.variables,i=this;if(n){if(i=this.resolve(r[0]))return void i.set(e,t);i=this}for(var s=0;s<r.length-1;s++){var a=r[s];o[a]||(o[a]={}),o=o[a]}o[r[r.length-1]]=t},get:function(e){var t=this.variables[e];return void 0!==t&&null!==t?t:null},lookup:function(e){var t=this.parent,n=this.variables[e];return void 0!==n&&null!==n?n:t&&t.lookup(e)},resolve:function(e){var t=this.parent,n=this.variables[e];return void 0!==n&&null!==n?this:t&&t.resolve(e)},push:function(){return new y(this)},pop:function(){return this.parent}});i.prototype=Object.create(String.prototype),i.prototype.valueOf=function(){return this.val},i.prototype.toString=function(){return this.val},e.runtime={Frame:y,makeMacro:t,makeKeywordArgs:n,numArgs:o,suppressValue:u,memberLookup:c,contextOrFrameLookup:p,callWrap:l,handleError:f,isArray:m.isArray,keys:m.keys,SafeString:i,copySafeness:s,markSafe:a,asyncEach:d,asyncAll:h}}(),function(){"use strict";var t=e.path,n=e.object,r=e.lib,o=n.extend({on:function(e,t){this.listeners=this.listeners||{},this.listeners[e]=this.listeners[e]||[],this.listeners[e].push(t)},emit:function(e){var t=Array.prototype.slice.call(arguments,1);this.listeners&&this.listeners[e]&&r.each(this.listeners[e],function(e){e.apply(null,t)})},resolve:function(e,n){return t.resolve(t.dirname(e),n)},isRelative:function(e){return 0===e.indexOf("./")||0===e.indexOf("../")}});e.loader=o}(),function(){"use strict";var t=e.loader,n=t.extend({init:function(e,t){this.precompiled=window.nunjucksPrecompiled||{},this.baseURL=e||"",this.neverUpdate=t},getSource:function(e){if(this.precompiled[e])return{src:{type:"code",obj:this.precompiled[e]},path:e};var t=this.fetch(this.baseURL+"/"+e);return t?{src:t,path:e,noCache:!this.neverUpdate}:null},fetch:function(e,t){var n,r,o=!0;return window.XMLHttpRequest?n=new XMLHttpRequest:window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLHTTP")),n.onreadystatechange=function(){4!==n.readyState||0!==n.status&&200!==n.status||!o||(o=!1,r=n.responseText)},e+=(-1===e.indexOf("?")?"?":"&")+"s="+(new Date).getTime(),n.open("GET",e,!1),n.send(),r}});e["web-loaders"]={WebLoader:n}}(),function(){"undefined"==typeof window||window!==this?e.loaders=e["node-loaders"]:e.loaders=e["web-loaders"]}(),function(){"use strict";var t=e.lib,n=e.runtime,r={abs:function(e){return Math.abs(e)},batch:function(e,t,n){for(var r=[],o=[],i=0;i<e.length;i++)i%t===0&&o.length&&(r.push(o),o=[]),o.push(e[i]);if(o.length){if(n)for(var i=o.length;t>i;i++)o.push(n);r.push(o)}return r},capitalize:function(e){var t=e.toLowerCase();return n.copySafeness(e,t.charAt(0).toUpperCase()+t.slice(1))},center:function(e,r){if(r=r||80,e.length>=r)return e;var o=r-e.length,i=t.repeat(" ",o/2-o%2),s=t.repeat(" ",o/2);return n.copySafeness(e,i+e+s)},"default":function(e,t){return e?e:t},dictsort:function(e,n,r){if(!t.isObject(e))throw new t.TemplateError("dictsort filter: val must be an object");var o=[];for(var i in e)o.push([i,e[i]]);var s;if(void 0===r||"key"===r)s=0;else{if("value"!==r)throw new t.TemplateError("dictsort filter: You can only sort by either key or value");s=1}return o.sort(function(e,r){var o=e[s],i=r[s];return n||(t.isString(o)&&(o=o.toUpperCase()),t.isString(i)&&(i=i.toUpperCase())),o>i?1:o===i?0:-1}),o},escape:function(e){return"string"==typeof e||e instanceof n.SafeString?t.escape(e):e},safe:function(e){return n.markSafe(e)},first:function(e){return e[0]},groupby:function(e,n){return t.groupBy(e,n)},indent:function(e,r,o){r=r||4;for(var i="",s=e.split("\n"),a=t.repeat(" ",r),u=0;u<s.length;u++)i+=0!==u||o?a+s[u]+"\n":s[u]+"\n";return n.copySafeness(e,i)},join:function(e,n,r){return n=n||"",r&&(e=t.map(e,function(e){return e[r]})),e.join(n)},last:function(e){return e[e.length-1]},length:function(e){return void 0!==e?e.length:0},list:function(e){if(t.isString(e))return e.split("");if(t.isObject(e)){var n=[];if(Object.keys)n=Object.keys(e);else for(var r in e)n.push(r);return t.map(n,function(t){return{key:t,value:e[t]}})}if(t.isArray(e))return e;throw new t.TemplateError("list filter: type not iterable")},lower:function(e){return e.toLowerCase()},random:function(e){return e[Math.floor(Math.random()*e.length)]},rejectattr:function(e,t){return e.filter(function(e){return!e[t]})},selectattr:function(e,t){return e.filter(function(e){return!!e[t]})},replace:function(e,t,r,o){if(t instanceof RegExp)return e.replace(t,r);var i=e,s=i,a=1;for(i=i.replace(t,r);s!==i&&!(a>=o);)s=i,i=i.replace(t,r),a++;return n.copySafeness(e,i)},reverse:function(e){var o;return o=t.isString(e)?r.list(e):t.map(e,function(e){return e}),o.reverse(),t.isString(e)?n.copySafeness(e,o.join("")):o},round:function(e,t,n){t=t||0;var r,o=Math.pow(10,t);return r="ceil"===n?Math.ceil:"floor"===n?Math.floor:Math.round,r(e*o)/o},slice:function(e,t,n){for(var r=Math.floor(e.length/t),o=e.length%t,i=0,s=[],a=0;t>a;a++){var u=i+a*r;o>a&&i++;var c=i+(a+1)*r,l=e.slice(u,c);n&&a>=o&&l.push(n),s.push(l)}return s},sort:function(e,n,r,o){return e=t.map(e,function(e){return e}),e.sort(function(e,i){var s,a;return o?(s=e[o],a=i[o]):(s=e,a=i),!r&&t.isString(s)&&t.isString(a)&&(s=s.toLowerCase(),a=a.toLowerCase()),a>s?n?1:-1:s>a?n?-1:1:0}),e},string:function(e){return n.copySafeness(e,e)},title:function(e){for(var t=e.split(" "),o=0;o<t.length;o++)t[o]=r.capitalize(t[o]);return n.copySafeness(e,t.join(" "))},trim:function(e){return n.copySafeness(e,e.replace(/^\s*|\s*$/g,""))},truncate:function(e,t,r,o){var i=e;if(t=t||255,e.length<=t)return e;if(r)e=e.substring(0,t);else{var s=e.lastIndexOf(" ",t);-1===s&&(s=t),e=e.substring(0,s)}return e+=void 0!==o&&null!==o?o:"...",n.copySafeness(i,e)},upper:function(e){return e.toUpperCase()},urlencode:function(e){var n=encodeURIComponent;if(t.isString(e))return n(e);var r;if(t.isArray(e))r=e.map(function(e){return n(e[0])+"="+n(e[1])});else{r=[];for(var o in e)e.hasOwnProperty(o)&&r.push(n(o)+"="+n(e[o]))}return r.join("&")},urlize:function(e,t,n){isNaN(t)&&(t=1/0);var r=n===!0?' rel="nofollow"':"",o=/^(?:\(|<|&lt;)?(.*?)(?:\.|,|\)|\n|&gt;)?$/,i=/^[\w.!#$%&'*+\-\/=?\^`{|}~]+@[a-z\d\-]+(\.[a-z\d\-]+)+$/i,s=/^https?:\/\/.*$/,a=/^www\./,u=/\.(?:org|net|com)(?:\:|\/|$)/,c=e.split(/\s+/).filter(function(e){return e&&e.length}).map(function(e){var n=e.match(o),c=n&&n[1]||e;return s.test(c)?'<a href="'+c+'"'+r+">"+c.substr(0,t)+"</a>":a.test(c)?'<a href="http://'+c+'"'+r+">"+c.substr(0,t)+"</a>":i.test(c)?'<a href="mailto:'+c+'">'+c+"</a>":u.test(c)?'<a href="http://'+c+'"'+r+">"+c.substr(0,t)+"</a>":e});return c.join(" ")},wordcount:function(e){var t=e?e.match(/\w+/g):null;return t?t.length:null},"float":function(e,t){var n=parseFloat(e);return isNaN(n)?t:n},"int":function(e,t){var n=parseInt(e,10);return isNaN(n)?t:n}};r.d=r["default"],r.e=r.escape,e.filters=r}(),function(){"use strict";function t(e){var t=-1;return{current:null,reset:function(){t=-1,this.current=null},next:function(){return t++,t>=e.length&&(t=0),this.current=e[t],this.current}}}function n(e){e=e||",";var t=!0;return function(){var n=t?"":e;return t=!1,n}}var r={range:function(e,t,n){t?n||(n=1):(t=e,e=0,n=1);for(var r=[],o=e;t>o;o+=n)r.push(o);return r},cycler:function(){return t(Array.prototype.slice.call(arguments))},joiner:function(e){return n(e)}};e.globals=r}(),function(){"use strict";var t=e.path,n=e.lib,r=e.object,o=(e.lexer,e.compiler),i=e.filters,s=e.loaders,a=e.runtime,u=e.globals,c=a.Frame,l=r.extend({init:function(e,t){var t=this.opts=t||{};this.opts.dev=!!t.dev,this.opts.autoescape=!!t.autoescape,this.opts.trimBlocks=!!t.trimBlocks,this.opts.lstripBlocks=!!t.lstripBlocks,e?this.loaders=n.isArray(e)?e:[e]:s.FileSystemLoader?this.loaders=[new s.FileSystemLoader("views")]:this.loaders=[new s.WebLoader("/views")],this.initCache(),this.filters={},this.asyncFilters=[],this.extensions={},this.extensionsList=[];for(var r in i)this.addFilter(r,i[r])},initCache:function(){n.each(this.loaders,function(e){e.cache={},"function"==typeof e.on&&e.on("update",function(t){e.cache[t]=null})})},addExtension:function(e,t){t._name=e,this.extensions[e]=t,this.extensionsList.push(t)},getExtension:function(e){return this.extensions[e]},addGlobal:function(e,t){u[e]=t},addFilter:function(e,t,n){var r=t;n&&this.asyncFilters.push(e),this.filters[e]=r},getFilter:function(e){if(!this.filters[e])throw new Error("filter not found: "+e);return this.filters[e]},resolveTemplate:function(e,t,n){var r=e.isRelative&&t?e.isRelative(n):!1;return r&&e.resolve?e.resolve(t,n):n},getTemplate:function(e,t,r,o){var i=this,s=null;if(e&&e.raw&&(e=e.raw),n.isFunction(r)&&(o=r,r=null,t=t||!1),n.isFunction(t)&&(o=t,t=!1),"string"!=typeof e)throw new Error("template names must be a string: "+e);for(var a=0;a<this.loaders.length;a++){var u=this.resolveTemplate(this.loaders[a],r,e);if(s=this.loaders[a].cache[u])break}if(!s){var c;return n.asyncIter(this.loaders,function(t,n,o,s){function a(e){e?(e.loader=t,s(e)):o()}e=i.resolveTemplate(t,r,e),t.async?t.getSource(e,function(e,t){if(e)throw e;a(t)}):a(t.getSource(e))},function(n){if(n){var r=new f(n.src,this,n.path,t);n.noCache||(n.loader.cache[e]=r),o?o(null,r):c=r}else{var i=new Error("template not found: "+e);if(!o)throw i;o(i)}}.bind(this)),c}return t&&s.compile(),o?void o(null,s):s},express:function(e){function n(e,n){if(this.name=e,this.path=e,this.defaultEngine=n.defaultEngine,this.ext=t.extname(e),!this.ext&&!this.defaultEngine)throw new Error("No default engine was specified and no extension was provided.");this.ext||(this.name+=this.ext=("."!==this.defaultEngine[0]?".":"")+this.defaultEngine)}var r=this;n.prototype.render=function(e,t){r.render(this.name,e,t)},e.set("view",n)},render:function(e,t,r){n.isFunction(t)&&(r=t,t=null);var o=null;return this.getTemplate(e,function(e,n){if(e&&r)r(e);else{if(e)throw e;n.render(t,r||function(e,t){if(e)throw e;o=t})}}),o},renderString:function(e,t,r,o){n.isFunction(r)&&(o=r,r={}),r=r||{};var i=new f(e,this,r.path);return i.render(t,o)}}),p=r.extend({init:function(e,t){this.ctx=e,this.blocks={},this.exported=[];for(var n in t)this.addBlock(n,t[n])},lookup:function(e){return e in u&&!(e in this.ctx)?u[e]:this.ctx[e]},setVariable:function(e,t){this.ctx[e]=t},getVariables:function(){return this.ctx},addBlock:function(e,t){this.blocks[e]=this.blocks[e]||[],this.blocks[e].push(t)},getBlock:function(e){if(!this.blocks[e])throw new Error('unknown block "'+e+'"');return this.blocks[e][0]},getSuper:function(e,t,r,o,i,s){var a=n.indexOf(this.blocks[t]||[],r),u=this.blocks[t][a+1],c=this;if(-1===a||!u)throw new Error('no super block available for "'+t+'"');u(e,c,o,i,s)},addExport:function(e){this.exported.push(e)},getExported:function(){for(var e={},t=0;t<this.exported.length;t++){var n=this.exported[t];e[n]=this.ctx[n]}return e}}),f=r.extend({init:function(e,t,r,o){if(this.env=t||new l,n.isObject(e))switch(e.type){case"code":this.tmplProps=e.obj;break;case"string":this.tmplStr=e.obj}else{if(!n.isString(e))throw new Error("src must be a string or an object describing the source");this.tmplStr=e}this.path=r,o?n.withPrettyErrors(this.path,this.env.dev,this._compile.bind(this)):this.compiled=!1},render:function(e,t,r){return"function"==typeof e?(r=e,e={}):"function"==typeof t&&(r=t,t=null),n.withPrettyErrors(this.path,this.env.dev,function(){try{this.compile()}catch(n){if(r)return r(n);throw n}var o=new p(e||{},this.blocks),i=null;return this.rootRenderFunc(this.env,o,t||new c,a,r||function(e,t){if(e)throw e;i=t}),i}.bind(this))},getExported:function(e,t,n){"function"==typeof e&&(n=e,e={}),"function"==typeof t&&(n=t,t=null);try{this.compile()}catch(r){if(n)return n(r);throw r}var o=new p(e||{},this.blocks);this.rootRenderFunc(this.env,o,t||new c,a,function(){n(null,o.getExported())})},compile:function(){this.compiled||this._compile()},_compile:function(){var e;if(this.tmplProps)e=this.tmplProps;else{var t=o.compile(this.tmplStr,this.env.asyncFilters,this.env.extensionsList,this.path,this.env.opts),n=new Function(t);e=n()}this.blocks=this._getBlocks(e),this.rootRenderFunc=e.root,this.compiled=!0},_getBlocks:function(e){var t={};for(var n in e)"b_"===n.slice(0,2)&&(t[n.slice(2)]=e[n]);return t}});e.environment={Environment:l,Template:f}}();var n,r=e.lib,o=e.environment,i=e.compiler,s=e.parser,a=e.lexer,u=e.runtime,c=e.loader,l=e.loaders,p=e.precompile;n={},n.Environment=o.Environment,n.Template=o.Template,n.Loader=c,n.FileSystemLoader=l.FileSystemLoader,n.WebLoader=l.WebLoader,n.compiler=i,n.parser=s,n.lexer=a,n.runtime=u;var f;n.configure=function(e,t){t=t||{},r.isObject(e)&&(t=e,e=null);var n="watch"in t?!t.watch:!1,i=l.FileSystemLoader||l.WebLoader;return f=new o.Environment(new i(e,n),t),t&&t.express&&f.express(t.express),f},n.compile=function(e,t,r,o){return f||n.configure(),new n.Template(e,t,r,o)},n.render=function(e,t,r){return f||n.configure(),f.render(e,t,r)},n.renderString=function(e,t,r){return f||n.configure(),f.renderString(e,t,r)},p&&(n.precompile=p.precompile,n.precompileString=p.precompileString),n.require=function(t){return e[t]},"function"==typeof define&&define.amd?define(function(){return n}):(window.nunjucks=n,"undefined"!=typeof t&&(t.exports=n))}()},{}],17:[function(e,t,n){!function(e,r){"function"==typeof define&&define.amd?define(r):"object"==typeof n?t.exports=r():e.Cookie=r();
}(this,function(e){"use strict";function t(n,r,o){return r===e?t.get(n):void(null===r?t.remove(n):t.set(n,r,o))}function n(e){return e.replace(/[.*+?^$|[\](){}\\-]/g,"\\$&")}function r(e){var t="";for(var n in e)if(e.hasOwnProperty(n)){if("expires"===n){var r=e[n];"object"!=typeof r&&(r+="number"==typeof r?"D":"",r=o(r)),e[n]=r.toUTCString()}t+=";"+n+"="+e[n]}return e.hasOwnProperty("path")||(t+=";path=/"),t}function o(e){var t=new Date,n=e.charAt(e.length-1),r=parseInt(e,10);switch(n){case"Y":t.setFullYear(t.getFullYear()+r);break;case"M":t.setMonth(t.getMonth()+r);break;case"D":t.setDate(t.getDate()+r);break;case"h":t.setHours(t.getHours()+r);break;case"m":t.setMinutes(t.getMinutes()+r);break;case"s":t.setSeconds(t.getSeconds()+r);break;default:t=new Date(e)}return t}return t.enabled=function(){var e,n="__test_key";return document.cookie=n+"=1",e=!!document.cookie,e&&t.remove(n),e},t.get=function(e,t){if("string"!=typeof e||!e)return null;e="(?:^|; )"+n(e)+"(?:=([^;]*?))?(?:;|$)";var r=new RegExp(e),o=r.exec(document.cookie);return null!==o?t?o[1]:decodeURIComponent(o[1]):null},t.getRaw=function(e){return t.get(e,!0)},t.set=function(e,t,n,o){n!==!0&&(o=n,n=!1),o=r(o?o:{});var i=e+"="+(n?t:encodeURIComponent(t))+o;document.cookie=i},t.setRaw=function(e,n,r){t.set(e,n,!0,r)},t.remove=function(e){t.set(e,"a",{expires:new Date})},t})},{}],18:[function(e,t,n){var r=e("nunjucks"),o=r.env||new r.Environment,i=function(){function e(e,t,n,r,o){var i=null,s=null,a="";try{n=n.push();var u=r.contextOrFrameLookup(t,n,"configItems");if(u){var c;if(r.isArray(u)){var l=u.length;for(c=0;c<u.length;c++){var p=u[c][0];n.set("name",u[c][0]);var f=u[c][1];n.set("item",u[c][1]),n.set("loop.index",c+1),n.set("loop.index0",c),n.set("loop.revindex",l-c),n.set("loop.revindex0",l-c-1),n.set("loop.first",0===c),n.set("loop.last",c===l-1),n.set("loop.length",l),a+='\r\n	<div class="cf-item" data-name="',a+=r.suppressValue(p,e.opts.autoescape),a+='" data-type="',a+=r.suppressValue(r.memberLookup(f,"type",e.opts.autoescape),e.opts.autoescape),a+='">\r\n		<span class="cf-lbl">',a+=r.suppressValue(r.memberLookup(f,"label",e.opts.autoescape),e.opts.autoescape),a+="</span>\r\n		","time"==r.memberLookup(f,"type",e.opts.autoescape)?(a+='\r\n			<span class="cf-controls"><button class="cf-dec cf-btn btn btn--toggle" type="button"',r.memberLookup(f,"value",e.opts.autoescape)<=r.contextOrFrameLookup(t,n,"timeStep")&&(a+=" disabled"),a+='>&minus;</button><span class="cf-value">',a+=r.suppressValue(e.getFilter("time").call(t,r.memberLookup(f,"value",e.opts.autoescape)),e.opts.autoescape),a+='</span><button class="cf-inc cf-btn btn btn--toggle" type="button">+</button></span>\r\n		'):"boolean"==r.memberLookup(f,"type",e.opts.autoescape)&&(a+='\r\n				<span class="cf-controls"><button class="cf-false cf-btn btn btn--toggle',r.memberLookup(f,"value",e.opts.autoescape)||(a+=" btn_pressed"),a+='" type="button">1</button><button class="cf-true cf-btn btn btn--toggle',r.memberLookup(f,"value",e.opts.autoescape)&&(a+=" btn_pressed"),a+='" type="button">2</button></span>\r\n		'),a+="\r\n	</div>\r\n"}}else{c=-1;var l=r.keys(u).length;for(var d in u){c++;var h=u[d];n.set("name",d),n.set("item",h),n.set("loop.index",c+1),n.set("loop.index0",c),n.set("loop.revindex",l-c),n.set("loop.revindex0",l-c-1),n.set("loop.first",0===c),n.set("loop.last",c===l-1),n.set("loop.length",l),a+='\r\n	<div class="cf-item" data-name="',a+=r.suppressValue(d,e.opts.autoescape),a+='" data-type="',a+=r.suppressValue(r.memberLookup(h,"type",e.opts.autoescape),e.opts.autoescape),a+='">\r\n		<span class="cf-lbl">',a+=r.suppressValue(r.memberLookup(h,"label",e.opts.autoescape),e.opts.autoescape),a+="</span>\r\n		","time"==r.memberLookup(h,"type",e.opts.autoescape)?(a+='\r\n			<span class="cf-controls"><button class="cf-dec cf-btn btn btn--toggle" type="button"',r.memberLookup(h,"value",e.opts.autoescape)<=r.contextOrFrameLookup(t,n,"timeStep")&&(a+=" disabled"),a+='>&minus;</button><span class="cf-value">',a+=r.suppressValue(e.getFilter("time").call(t,r.memberLookup(h,"value",e.opts.autoescape)),e.opts.autoescape),a+='</span><button class="cf-inc cf-btn btn btn--toggle" type="button">+</button></span>\r\n		'):"boolean"==r.memberLookup(h,"type",e.opts.autoescape)&&(a+='\r\n				<span class="cf-controls"><button class="cf-false cf-btn btn btn--toggle',r.memberLookup(h,"value",e.opts.autoescape)||(a+=" btn_pressed"),a+='" type="button">1</button><button class="cf-true cf-btn btn btn--toggle',r.memberLookup(h,"value",e.opts.autoescape)&&(a+=" btn_pressed"),a+='" type="button">2</button></span>\r\n		'),a+="\r\n	</div>\r\n"}}}n=n.pop(),o(null,a)}catch(m){o(r.handleError(m,i,s))}}return{root:e}}(),s=i.root;i.root=function(t,n,r,o,i){var a=t.getTemplate;t.getTemplate=function(t,n,o,i){"function"==typeof n&&(i=n,n=!1);var s=function(t){try{return e(t)}catch(n){if(r.get("_require"))return r.get("_require")(t)}},a=s(t);r.set("_require",s),n&&a.compile(),i(null,a)},s(t,n,r,o,function(e,n){t.getTemplate=a,i(e,n)})};var a={obj:i,type:"code"};t.exports=new r.Template(a,o)},{nunjucks:16}],19:[function(e,t,n){var r=e("nunjucks"),o=r.env||new r.Environment,i=function(){function e(e,t,n,r,o){var i=null,s=null,a="";try{n=n.push();var u=(i=0,s=15,r.callWrap(r.contextOrFrameLookup(t,n,"range"),"range",[0,r.contextOrFrameLookup(t,n,"slotCount")]));if(u)for(var c=u.length,l=0;l<u.length;l++){var p=u[l];n.set("i",p),n.set("loop.index",l+1),n.set("loop.index0",l),n.set("loop.revindex",c-l),n.set("loop.revindex0",c-l-1),n.set("loop.first",0===l),n.set("loop.last",l===c-1),n.set("loop.length",c),a+='\r\n	<li class="js-judge">\r\n	';var f;f=r.memberLookup(r.contextOrFrameLookup(t,n,"cornerJudges"),p,e.opts.autoescape),n.set("cj",f,!0),n.parent||(t.setVariable("cj",f),t.addExport("cj")),a+="\r\n	",r.contextOrFrameLookup(t,n,"cj")?(a+='\r\n		<h3 class="js-judge-name">',a+=r.suppressValue(r.memberLookup(r.contextOrFrameLookup(t,n,"cj"),"name",e.opts.autoescape),e.opts.autoescape),a+='</h3>\r\n		<button type="button" class="js-judge-remove" title="Remove" data-id="',a+=r.suppressValue(r.memberLookup(r.contextOrFrameLookup(t,n,"cj"),"id",e.opts.autoescape),e.opts.autoescape),a+='">&times;</button>\r\n		',r.memberLookup(r.contextOrFrameLookup(t,n,"cj"),"authorised",e.opts.autoescape)?(a+='\r\n			<span class="js-judge-state">',a+=r.memberLookup(r.contextOrFrameLookup(t,n,"cj"),"connected",e.opts.autoescape)?"Connected":"Connection lost. Waiting for reconnection...",a+="</span>\r\n		"):(a+='\r\n			<div class="js-judge-btns">\r\n				<button type="button" class="js-judge-accept js-judge-btn btn btn--major" data-id="',a+=r.suppressValue(r.memberLookup(r.contextOrFrameLookup(t,n,"cj"),"id",e.opts.autoescape),e.opts.autoescape),a+='">Accept</button>\r\n				<button type="button" class="js-judge-reject js-judge-btn btn btn--minor" data-id="',a+=r.suppressValue(r.memberLookup(r.contextOrFrameLookup(t,n,"cj"),"id",e.opts.autoescape),e.opts.autoescape),a+='">Reject</button>\r\n			</div>\r\n		'),a+="\r\n	"):(a+='\r\n		<h3 class="js-judge-name">Judge #',a+=r.suppressValue(p+1,e.opts.autoescape),a+='</h3>\r\n		<span class="js-judge-state">Waiting for connection</span>\r\n	'),a+="\r\n	</li>\r\n"}n=n.pop(),o(null,a)}catch(d){o(r.handleError(d,i,s))}}return{root:e}}(),s=i.root;i.root=function(t,n,r,o,i){var a=t.getTemplate;t.getTemplate=function(t,n,o,i){"function"==typeof n&&(i=n,n=!1);var s=function(t){try{return e(t)}catch(n){if(r.get("_require"))return r.get("_require")(t)}},a=s(t);r.set("_require",s),n&&a.compile(),i(null,a)},s(t,n,r,o,function(e,n){t.getTemplate=a,i(e,n)})};var a={obj:i,type:"code"};t.exports=new r.Template(a,o)},{nunjucks:16}],20:[function(e,t,n){var r=e("nunjucks"),o=r.env||new r.Environment,i=function(){function e(e,t,n,r,o){var i=null,s=null,a="";try{n=n.push();var u=["warnings","fouls"];if(u)for(var c=u.length,l=0;l<u.length;l++){var p=u[l];n.set("penaltyType",p),n.set("loop.index",l+1),n.set("loop.index0",l),n.set("loop.revindex",c-l),n.set("loop.revindex0",c-l-1),n.set("loop.first",0===l),n.set("loop.last",l===c-1),n.set("loop.length",c),a+='\r\n	<h2 class="pe-heading">',a+=r.suppressValue(e.getFilter("capitalize").call(t,p),e.opts.autoescape),a+='</h2>\r\n	<div class="pe-inner pe-inner--',a+=r.suppressValue(p,e.opts.autoescape),a+='">\r\n		';var f;f=r.memberLookup(r.contextOrFrameLookup(t,n,"penalties"),p,e.opts.autoescape),n.set("penalty",f,!0),n.parent||(t.setVariable("penalty",f),t.addExport("penalty")),a+='\r\n		<div class="pe-item">\r\n			<span class="pe-value hong-bg">',a+=r.suppressValue(r.memberLookup(r.contextOrFrameLookup(t,n,"penalty"),0,e.opts.autoescape),e.opts.autoescape),a+='</span>\r\n			<div class="pe-btns">\r\n				<button class="pe-inc pe-btn btn" type="button" data-type="',a+=r.suppressValue(p,e.opts.autoescape),a+='" data-competitor="hong"',r.contextOrFrameLookup(t,n,"enabled")||(a+=" disabled"),a+='>+</button>\r\n				<button class="pe-dec pe-btn btn btn--minor" type="button" data-type="',a+=r.suppressValue(p,e.opts.autoescape),a+='" data-competitor="hong"',(!r.contextOrFrameLookup(t,n,"enabled")||r.memberLookup(r.contextOrFrameLookup(t,n,"penalty"),0,e.opts.autoescape)<=0)&&(a+=" disabled"),a+='>&minus;</button>\r\n			</div>\r\n		</div>\r\n		<div class="pe-item">\r\n			<span class="pe-value chong-bg">',a+=r.suppressValue(r.memberLookup(r.contextOrFrameLookup(t,n,"penalty"),1,e.opts.autoescape),e.opts.autoescape),a+='</span>\r\n			<div class="pe-btns">\r\n				<button class="pe-inc pe-btn btn" type="button" data-type="',a+=r.suppressValue(p,e.opts.autoescape),a+='" data-competitor="chong"',r.contextOrFrameLookup(t,n,"enabled")||(a+=" disabled"),a+='>+</button>\r\n				<button class="pe-dec pe-btn btn btn--minor" type="button" data-type="',a+=r.suppressValue(p,e.opts.autoescape),a+='" data-competitor="chong"',(!r.contextOrFrameLookup(t,n,"enabled")||r.memberLookup(r.contextOrFrameLookup(t,n,"penalty"),1,e.opts.autoescape)<=0)&&(a+=" disabled"),a+=">&minus;</button>\r\n			</div>\r\n		</div>\r\n	</div>\r\n"}n=n.pop(),o(null,a)}catch(d){o(r.handleError(d,i,s))}}return{root:e}}(),s=i.root;i.root=function(t,n,r,o,i){var a=t.getTemplate;t.getTemplate=function(t,n,o,i){"function"==typeof n&&(i=n,n=!1);var s=function(t){try{return e(t)}catch(n){if(r.get("_require"))return r.get("_require")(t)}},a=s(t);r.set("_require",s),n&&a.compile(),i(null,a)},s(t,n,r,o,function(e,n){t.getTemplate=a,i(e,n)})};var a={obj:i,type:"code"};t.exports=new r.Template(a,o)},{nunjucks:16}],21:[function(e,t,n){var r=e("nunjucks"),o=r.env||new r.Environment,i=function(){function e(e,t,n,r,o){var i=null,s=null,a="";try{a+='<table class="res-table">\r\n	<thead class="res-head">\r\n		<tr class="res-header-row">\r\n			<th></th>\r\n			',n=n.push();var u=r.contextOrFrameLookup(t,n,"periods");if(u)for(var c=u.length,l=0;l<u.length;l++){var p=u[l];n.set("period",p),n.set("loop.index",l+1),n.set("loop.index0",l),n.set("loop.revindex",c-l),n.set("loop.revindex0",c-l-1),n.set("loop.first",0===l),n.set("loop.last",l===c-1),n.set("loop.length",c),a+='\r\n				<th scope="col" colspan="2">',a+=r.suppressValue(p,e.opts.autoescape),a+='</th>\r\n				<th scope="col" colspan="2">Total</th>\r\n			'}n=n.pop(),a+='\r\n		</tr>\r\n	</thead>\r\n	<tbody class="res-body">\r\n		',n=n.push();var f=["warnings","fouls"];if(f)for(var d=f.length,h=0;h<f.length;h++){var m=f[h];n.set("penaltyType",m),n.set("loop.index",h+1),n.set("loop.index0",h),n.set("loop.revindex",d-h),n.set("loop.revindex0",d-h-1),n.set("loop.first",0===h),n.set("loop.last",h===d-1),n.set("loop.length",d),a+='\r\n			<tr class="res-row--',a+=r.suppressValue(m,e.opts.autoescape),a+='">\r\n				<th scope="row">',a+=r.suppressValue(e.getFilter("capitalize").call(t,m),e.opts.autoescape),a+="</th>\r\n				",n=n.push();var v=r.contextOrFrameLookup(t,n,"periods");if(v)for(var y=v.length,g=0;g<v.length;g++){var b=v[g];n.set("period",b),n.set("loop.index",g+1),n.set("loop.index0",g),n.set("loop.revindex",y-g),n.set("loop.revindex0",y-g-1),n.set("loop.first",0===g),n.set("loop.last",g===y-1),n.set("loop.length",y),a+='\r\n					<td class="hong-sbg">',a+=r.suppressValue(r.memberLookup(r.memberLookup(r.memberLookup(r.contextOrFrameLookup(t,n,"penalties"),b,e.opts.autoescape),m,e.opts.autoescape),0,e.opts.autoescape),e.opts.autoescape),a+='</td>\r\n					<td class="chong-sbg">',a+=r.suppressValue(r.memberLookup(r.memberLookup(r.memberLookup(r.contextOrFrameLookup(t,n,"penalties"),b,e.opts.autoescape),m,e.opts.autoescape),1,e.opts.autoescape),e.opts.autoescape),a+="</td>\r\n					","warnings"==m&&(a+='\r\n						<td class="hong-sbg" rowspan="2">',a+=r.suppressValue(r.memberLookup(r.memberLookup(r.contextOrFrameLookup(t,n,"maluses"),b,e.opts.autoescape),0,e.opts.autoescape),e.opts.autoescape),a+='</td>\r\n						<td class="chong-sbg" rowspan="2">',a+=r.suppressValue(r.memberLookup(r.memberLookup(r.contextOrFrameLookup(t,n,"maluses"),b,e.opts.autoescape),1,e.opts.autoescape),e.opts.autoescape),a+="</td>\r\n					"),a+="\r\n				"}n=n.pop(),a+="\r\n			</tr>\r\n		"}n=n.pop(),a+="\r\n		",n=n.push();var w=r.contextOrFrameLookup(t,n,"scoreboards");if(w){var x;if(r.isArray(w)){var _=w.length;for(x=0;x<w.length;x++){w[x][0];n.set("cjId",w[x][0]);var k=w[x][1];n.set("scoreboard",w[x][1]),n.set("loop.index",x+1),n.set("loop.index0",x),n.set("loop.revindex",_-x),n.set("loop.revindex0",_-x-1),n.set("loop.first",0===x),n.set("loop.last",x===_-1),n.set("loop.length",_),a+="\r\n			";var E;E=["-","-"],n.set("noData",E,!0),n.parent||(t.setVariable("noData",E),t.addExport("noData")),a+='\r\n			<tr>\r\n				<th scope="row">',a+=r.suppressValue(r.memberLookup(k,"cjName",e.opts.autoescape),e.opts.autoescape),a+="</th>\r\n				",n=n.push();var S=r.contextOrFrameLookup(t,n,"periods");if(S)for(var L=S.length,j=0;j<S.length;j++){var T=S[j];n.set("period",T),n.set("loop.index",j+1),n.set("loop.index0",j),n.set("loop.revindex",L-j),n.set("loop.revindex0",L-j-1),n.set("loop.first",0===j),n.set("loop.last",j===L-1),n.set("loop.length",L),a+="\r\n					";var O;O=r.memberLookup(r.memberLookup(k,"sheets",e.opts.autoescape),T,e.opts.autoescape),n.set("sheet",O,!0),n.parent||(t.setVariable("sheet",O),t.addExport("sheet")),a+="\r\n					";var C;C=r.contextOrFrameLookup(t,n,"sheet")&&r.memberLookup(r.contextOrFrameLookup(t,n,"sheet"),"totals",e.opts.autoescape)?r.contextOrFrameLookup(t,n,"sheet"):{scores:r.contextOrFrameLookup(t,n,"noData"),totals:r.contextOrFrameLookup(t,n,"noData"),winner:""},n.set("sheet",C,!0),n.parent||(t.setVariable("sheet",C),t.addExport("sheet")),a+='\r\n					<td class="hong-sbg">',a+=r.suppressValue(r.memberLookup(r.memberLookup(r.contextOrFrameLookup(t,n,"sheet"),"scores",e.opts.autoescape),0,e.opts.autoescape),e.opts.autoescape),a+='</td>\r\n					<td class="chong-sbg">',a+=r.suppressValue(r.memberLookup(r.memberLookup(r.contextOrFrameLookup(t,n,"sheet"),"scores",e.opts.autoescape),1,e.opts.autoescape),e.opts.autoescape),a+='</td>\r\n					<td class="hong-',a+=r.suppressValue("hong"==r.memberLookup(r.contextOrFrameLookup(t,n,"sheet"),"winner",e.opts.autoescape)?"bg":"sbg",e.opts.autoescape),a+=' ">',a+=r.suppressValue(r.memberLookup(r.memberLookup(r.contextOrFrameLookup(t,n,"sheet"),"totals",e.opts.autoescape),0,e.opts.autoescape),e.opts.autoescape),a+='</td>\r\n					<td class="chong-',a+=r.suppressValue("chong"==r.memberLookup(r.contextOrFrameLookup(t,n,"sheet"),"winner",e.opts.autoescape)?"bg":"sbg",e.opts.autoescape),a+=' ">',a+=r.suppressValue(r.memberLookup(r.memberLookup(r.contextOrFrameLookup(t,n,"sheet"),"totals",e.opts.autoescape),1,e.opts.autoescape),e.opts.autoescape),a+="</td>\r\n				"}n=n.pop(),a+="\r\n			</tr>\r\n		"}}else{x=-1;var _=r.keys(w).length;for(var A in w){x++;var N=w[A];n.set("cjId",A),n.set("scoreboard",N),n.set("loop.index",x+1),n.set("loop.index0",x),n.set("loop.revindex",_-x),n.set("loop.revindex0",_-x-1),n.set("loop.first",0===x),n.set("loop.last",x===_-1),n.set("loop.length",_),a+="\r\n			";var I;I=["-","-"],n.set("noData",I,!0),n.parent||(t.setVariable("noData",I),t.addExport("noData")),a+='\r\n			<tr>\r\n				<th scope="row">',a+=r.suppressValue(r.memberLookup(N,"cjName",e.opts.autoescape),e.opts.autoescape),a+="</th>\r\n				",n=n.push();var P=r.contextOrFrameLookup(t,n,"periods");if(P)for(var q=P.length,F=0;F<P.length;F++){var B=P[F];n.set("period",B),n.set("loop.index",F+1),n.set("loop.index0",F),n.set("loop.revindex",q-F),n.set("loop.revindex0",q-F-1),n.set("loop.first",0===F),n.set("loop.last",F===q-1),n.set("loop.length",q),a+="\r\n					";var M;M=r.memberLookup(r.memberLookup(N,"sheets",e.opts.autoescape),B,e.opts.autoescape),n.set("sheet",M,!0),n.parent||(t.setVariable("sheet",M),t.addExport("sheet")),a+="\r\n					";var R;R=r.contextOrFrameLookup(t,n,"sheet")&&r.memberLookup(r.contextOrFrameLookup(t,n,"sheet"),"totals",e.opts.autoescape)?r.contextOrFrameLookup(t,n,"sheet"):{scores:r.contextOrFrameLookup(t,n,"noData"),totals:r.contextOrFrameLookup(t,n,"noData"),winner:""},n.set("sheet",R,!0),n.parent||(t.setVariable("sheet",R),t.addExport("sheet")),a+='\r\n					<td class="hong-sbg">',a+=r.suppressValue(r.memberLookup(r.memberLookup(r.contextOrFrameLookup(t,n,"sheet"),"scores",e.opts.autoescape),0,e.opts.autoescape),e.opts.autoescape),a+='</td>\r\n					<td class="chong-sbg">',a+=r.suppressValue(r.memberLookup(r.memberLookup(r.contextOrFrameLookup(t,n,"sheet"),"scores",e.opts.autoescape),1,e.opts.autoescape),e.opts.autoescape),a+='</td>\r\n					<td class="hong-',a+=r.suppressValue("hong"==r.memberLookup(r.contextOrFrameLookup(t,n,"sheet"),"winner",e.opts.autoescape)?"bg":"sbg",e.opts.autoescape),a+=' ">',a+=r.suppressValue(r.memberLookup(r.memberLookup(r.contextOrFrameLookup(t,n,"sheet"),"totals",e.opts.autoescape),0,e.opts.autoescape),e.opts.autoescape),a+='</td>\r\n					<td class="chong-',a+=r.suppressValue("chong"==r.memberLookup(r.contextOrFrameLookup(t,n,"sheet"),"winner",e.opts.autoescape)?"bg":"sbg",e.opts.autoescape),a+=' ">',a+=r.suppressValue(r.memberLookup(r.memberLookup(r.contextOrFrameLookup(t,n,"sheet"),"totals",e.opts.autoescape),1,e.opts.autoescape),e.opts.autoescape),a+="</td>\r\n				"}n=n.pop(),a+="\r\n			</tr>\r\n		"}}}n=n.pop(),a+="\r\n	</tbody>\r\n</table>",o(null,a)}catch(D){o(r.handleError(D,i,s))}}return{root:e}}(),s=i.root;i.root=function(t,n,r,o,i){var a=t.getTemplate;t.getTemplate=function(t,n,o,i){"function"==typeof n&&(i=n,n=!1);var s=function(t){try{return e(t)}catch(n){if(r.get("_require"))return r.get("_require")(t)}},a=s(t);r.set("_require",s),n&&a.compile(),i(null,a)},s(t,n,r,o,function(e,n){t.getTemplate=a,i(e,n)})};var a={obj:i,type:"code"};t.exports=new r.Template(a,o)},{nunjucks:16}],22:[function(e,t,n){var r=e("nunjucks"),o=r.env||new r.Environment,i=function(){function e(e,t,n,r,o){var i=null,s=null,a="";try{n=n.push();var u=r.contextOrFrameLookup(t,n,"rings");if(u)for(var c=u.length,l=0;l<u.length;l++){var p=u[l];n.set("ring",p),n.set("loop.index",l+1),n.set("loop.index0",l),n.set("loop.revindex",c-l),n.set("loop.revindex0",c-l-1),n.set("loop.first",0===l),n.set("loop.last",l===c-1),n.set("loop.length",c),a+='\r\n	<li>\r\n		<button type="button" class="btn ',r.contextOrFrameLookup(t,n,"isJP")||(a+="no-hover "),a+='rl-btn" data-index="',a+=r.suppressValue(r.memberLookup(p,"index",e.opts.autoescape),e.opts.autoescape),a+='"',(r.contextOrFrameLookup(t,n,"isJP")&&r.memberLookup(p,"open",e.opts.autoescape)||!r.contextOrFrameLookup(t,n,"isJP")&&!r.memberLookup(p,"open",e.opts.autoescape))&&(a+=" disabled"),a+=">",a+=r.suppressValue(r.memberLookup(p,"index",e.opts.autoescape)+1,e.opts.autoescape),a+="</button>\r\n	</li>\r\n"}n=n.pop(),o(null,a)}catch(f){o(r.handleError(f,i,s))}}return{root:e}}(),s=i.root;i.root=function(t,n,r,o,i){var a=t.getTemplate;t.getTemplate=function(t,n,o,i){"function"==typeof n&&(i=n,n=!1);var s=function(t){try{return e(t)}catch(n){if(r.get("_require"))return r.get("_require")(t)}},a=s(t);r.set("_require",s),n&&a.compile(),i(null,a)},s(t,n,r,o,function(e,n){t.getTemplate=a,i(e,n)})};var a={obj:i,type:"code"};t.exports=new r.Template(a,o)},{nunjucks:16}],23:[function(e,t,n){var r=e("nunjucks"),o=r.env||new r.Environment,i=function(){function e(e,t,n,r,o){var i=null,s=null,a="";try{n=n.push();var u=r.contextOrFrameLookup(t,n,"scoreboards");if(u)for(var c=u.length,l=0;l<u.length;l++){var p=u[l];n.set("scoreboard",p),n.set("loop.index",l+1),n.set("loop.index0",l),n.set("loop.revindex",c-l),n.set("loop.revindex0",c-l-1),n.set("loop.first",0===l),n.set("loop.last",l===c-1),n.set("loop.length",c),a+='\r\n	<div class="sc-judge">\r\n		<h3 class="sc-judge-name">',a+=r.suppressValue(r.memberLookup(p,"cjName",e.opts.autoescape),e.opts.autoescape),a+='</h3>\r\n		<div class="sc-judge-score">\r\n			<span class="sc-hong hong-bg">',a+=r.suppressValue(r.memberLookup(r.memberLookup(p,"scores",e.opts.autoescape),0,e.opts.autoescape),e.opts.autoescape),a+='</span>\r\n			<span class="sc-chong chong-bg">',a+=r.suppressValue(r.memberLookup(r.memberLookup(p,"scores",e.opts.autoescape),1,e.opts.autoescape),e.opts.autoescape),a+="</span>\r\n		</div>\r\n	</div>\r\n"}n=n.pop(),o(null,a)}catch(f){o(r.handleError(f,i,s))}}return{root:e}}(),s=i.root;i.root=function(t,n,r,o,i){var a=t.getTemplate;t.getTemplate=function(t,n,o,i){"function"==typeof n&&(i=n,n=!1);var s=function(t){try{return e(t)}catch(n){if(r.get("_require"))return r.get("_require")(t)}},a=s(t);r.set("_require",s),n&&a.compile(),i(null,a)},s(t,n,r,o,function(e,n){t.getTemplate=a,i(e,n)})};var a={obj:i,type:"code"};t.exports=new r.Template(a,o)},{nunjucks:16}],24:[function(e,t,n){var r=e("nunjucks"),o=r.env||new r.Environment,i=function(){function e(e,t,n,r,o){var i=null,s=null,a="";try{a+='<button type="button" class="match-btn match-btn--start btn',r.contextOrFrameLookup(t,n,"isBreak")||(a+=" btn--major"),a+='"',r.contextOrFrameLookup(t,n,"isIdle")||(a+=" disabled"),a+='>Start</button>\r\n<button type="button" class="match-btn match-btn--end btn',r.contextOrFrameLookup(t,n,"isBreak")||(a+=" btn--major"),a+='"',(!r.contextOrFrameLookup(t,n,"isStarted")||r.contextOrFrameLookup(t,n,"isInjury"))&&(a+=" disabled"),a+='>End</button>\r\n<button type="button" class="match-btn match-btn--injury btn btn--minor"',r.contextOrFrameLookup(t,n,"canStartInjury")||r.contextOrFrameLookup(t,n,"isInjury")||(a+=" disabled"),a+=">",a+=r.suppressValue(r.contextOrFrameLookup(t,n,"isInjury")?"End":"Start",e.opts.autoescape),a+=" Injury</button>",o(null,a)}catch(u){o(r.handleError(u,i,s))}}return{root:e}}(),s=i.root;i.root=function(t,n,r,o,i){var a=t.getTemplate;t.getTemplate=function(t,n,o,i){"function"==typeof n&&(i=n,n=!1);var s=function(t){try{return e(t)}catch(n){if(r.get("_require"))return r.get("_require")(t)}},a=s(t);r.set("_require",s),n&&a.compile(),i(null,a)},s(t,n,r,o,function(e,n){t.getTemplate=a,i(e,n)})};var a={obj:i,type:"code"};t.exports=new r.Template(a,o)},{nunjucks:16}]},{},[6]);
//# sourceMappingURL=jury-president.js.map